<!DOCTYPE html>
<html lang="en">
<!-- Brevo Conversations {literal} -->
<script>
    (function(d, w, c) {
        w.BrevoConversationsID = '67cfe70069e9058aa30db4b2';
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        var s = d.createElement('script');
        s.async = true;
        s.src = 'https://conversations-widget.brevo.com/brevo-conversations.js';
        if (d.head) d.head.appendChild(s);
    })(document, window, 'BrevoConversations');
</script>
<!-- /Brevo Conversations {/literal} -->
<head>
  <script type="module">
import { createHotContext } from "/@vite/client";
const hot = createHotContext("/__dummy__runtime-error-plugin");

function sendError(error) {
  if (!(error instanceof Error)) {
    error = new Error("(unknown runtime error)");
  }
  const serialized = {
    message: error.message,
    stack: error.stack,
  };
  hot.send("runtime-error-plugin:error", serialized);
}

window.addEventListener("error", (evt) => {
  sendError(evt.error);
});

window.addEventListener("unhandledrejection", (evt) => {
  sendError(evt.reason);
});
</script>

  <script type="module">import { injectIntoGlobalHook } from "/@react-refresh";
injectIntoGlobalHook(window);
window.$RefreshReg$ = () => {};
window.$RefreshSig$ = () => (type) => type;</script>

  <script type="module" src="/@vite/client"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesahub Kenya - Buy Airtime, Sell Airtime & Get Instant Loans up to KES 15,000</title>
    
    <!-- Primary SEO Meta Tags -->
    <meta name="title" content="Pesahub Kenya - Buy Airtime, Sell Airtime & Get Instant Loans up to KES 15,000">
    <meta name="description" content="Kenya's trusted platform to buy and sell airtime for all networks (Safaricom, Airtel, Telkom). Get instant loans up to KES 15,000 with low interest rates. Fast, secure, and reliable M-Pesa transactions. No account needed for airtime purchase!">
    <meta name="keywords" content="buy airtime Kenya, sell airtime Kenya, Safaricom airtime, Airtel airtime, Telkom airtime, instant loans Kenya, M-Pesa loans, quick loans Kenya, airtime to cash, mobile money Kenya, Pesahub, airtime float, cheap airtime Kenya, loan app Kenya, emergency loans Kenya, payday loans Kenya, micro loans Kenya">
    <meta name="author" content="Pesahub Kenya">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="3 days">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://pesahublmtd.onrender.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pesahublmtd.onrender.com/">
    <meta property="og:title" content="Pesahub Kenya - Buy Airtime, Sell Airtime & Get Instant Loans up to KES 15,000">
    <meta property="og:description" content="Kenya's trusted platform to buy and sell airtime for all networks. Get instant loans up to KES 15,000 with low interest rates. Fast M-Pesa transactions. No account needed!">
    <meta property="og:image" content="https://pesahublmtd.onrender.com/airtime-logo.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:site_name" content="Pesahub Kenya">
    <meta property="og:locale" content="en_KE">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://pesahublmtd.onrender.com/">
    <meta name="twitter:title" content="Pesahub Kenya - Buy Airtime, Sell Airtime & Get Instant Loans up to KES 15,000">
    <meta name="twitter:description" content="Kenya's trusted platform to buy and sell airtime for all networks. Get instant loans up to KES 15,000 with low interest rates. Fast M-Pesa transactions!">
    <meta name="twitter:image" content="https://pesahublmtd.onrender.com/airtime-logo.png">
    
    <!-- Mobile App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Pesahub Kenya">
    <meta name="application-name" content="Pesahub Kenya">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=yes">
    
    <!-- Geo Tags for Kenya -->
    <meta name="geo.region" content="KE">
    <meta name="geo.country" content="Kenya">
    <meta name="geo.placename" content="Nairobi, Kenya">
    
    <!-- Favicon and Icons -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="/airtime-logo.png">
    <link rel="apple-touch-icon" href="/airtime-logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/airtime-logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/airtime-logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/airtime-logo.png">
    <meta name="msapplication-TileImage" content="/airtime-logo.png">
    <meta name="msapplication-TileColor" content="#1a5f2a">
    <meta name="theme-color" content="#1a5f2a">
    
    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FinancialService",
        "name": "Pesahub Kenya",
        "description": "Kenya's trusted platform to buy and sell airtime for all networks and get instant loans up to KES 15,000",
        "url": "https://pesahublmtd.onrender.com",
        "logo": "https://pesahublmtd.onrender.com/airtime-logo.png",
        "image": "https://pesahublmtd.onrender.com/airtime-logo.png",
        "telephone": "+254700000000",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "KE",
            "addressLocality": "Nairobi"
        },
        "areaServed": {
            "@type": "Country",
            "name": "Kenya"
        },
        "serviceType": ["Airtime Sales", "Mobile Loans", "Airtime to Cash"],
        "currenciesAccepted": "KES",
        "paymentAccepted": ["M-Pesa", "Airtel Money"],
        "priceRange": "KES 10 - KES 15,000",
        "sameAs": []
    }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a5f2a;
            --primary-dark: #0d3d18;
            --primary-light: #2d8b42;
            --secondary: #f4a020;
            --accent: #e63946;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --dark: #212529;
            --light: #f8f9fa;
            --white: #ffffff;
            --gray: #6c757d;
            --border: #dee2e6;
        }

        [data-theme="dark"] {
            --primary: #2d8b42;
            --primary-dark: #1a5f2a;
            --dark: #f8f9fa;
            --light: #1a1a2e;
            --white: #16213e;
            --gray: #adb5bd;
            --border: #3a3a5c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light);
            color: var(--dark);
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .balance-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.01);
            z-index: 999;
            display: none;
            pointer-events: none;
        }

        .balance-overlay.show {
            display: block;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading-overlay.show { display: flex; }

        .loading-spinner-large {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: #f4a020;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: white;
            font-size: 1.1rem;
            font-weight: 500;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes spin { to { transform: rotate(360deg); } }

        .live-activity-toast {
            position: fixed;
            bottom: 20px;
            left: 10px;
            right: 10px;
            max-width: 280px;
            background: linear-gradient(135deg, rgba(26, 95, 42, 0.95), rgba(13, 61, 24, 0.98));
            border-radius: 10px;
            padding: 10px 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 9998;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(150%);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 1px solid rgba(244, 160, 32, 0.3);
        }
        .live-activity-toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        .live-activity-toast .live-dot {
            width: 6px;
            height: 6px;
            background: #28a745;
            border-radius: 50%;
            animation: livePulse 1.5s ease-in-out infinite;
            flex-shrink: 0;
        }
        @keyframes livePulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            50% { box-shadow: 0 0 0 4px rgba(40, 167, 69, 0); }
        }
        .live-activity-toast .activity-icon {
            width: 28px;
            height: 28px;
            background: rgba(244, 160, 32, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .live-activity-toast .activity-icon i {
            font-size: 0.75rem;
            color: #f4a020;
        }
        .live-activity-toast .activity-content {
            flex: 1;
            min-width: 0;
        }
        .live-activity-toast .activity-name {
            font-size: 0.7rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .live-activity-toast .activity-desc {
            font-size: 0.65rem;
            color: rgba(255,255,255,0.8);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .live-activity-toast .activity-time {
            font-size: 0.55rem;
            color: rgba(255,255,255,0.5);
            flex-shrink: 0;
        }
        
        @keyframes bellShake {
            0%, 100% { transform: rotate(0); }
            10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
            20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }
        
        @keyframes giftShake {
            0%, 100% { transform: rotate(0) scale(1); }
            15% { transform: rotate(-15deg) scale(1.1); }
            30% { transform: rotate(10deg) scale(1.15); }
            45% { transform: rotate(-10deg) scale(1.1); }
            60% { transform: rotate(8deg) scale(1.05); }
            75% { transform: rotate(-5deg) scale(1); }
        }
        
        .shake-gift {
            animation: giftShake 1.5s ease-in-out infinite;
            color: #f4a020;
        }
        
        .sell-airtime-menu {
            background: linear-gradient(135deg, rgba(244, 160, 32, 0.1), rgba(230, 126, 34, 0.1)) !important;
        }
        
        .notification-btn.has-notification i {
            animation: bellShake 0.8s ease-in-out infinite;
            color: #ffd700;
        }
        
        .notification-item.unread h5 {
            color: #ffd700;
            font-weight: 600;
        }
        
        .scrolling-text-container {
            background: linear-gradient(135deg, var(--secondary), #e67e22);
            overflow: hidden;
            padding: 10px 0;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        .scrolling-text {
            display: inline-block;
            white-space: nowrap;
            animation: scrollText 20s linear infinite;
            font-weight: 600;
            color: var(--dark);
        }
        
        @keyframes scrollText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        .users-graph-card {
            background: var(--white);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .graph-container {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            gap: 10px;
            padding: 20px 10px 10px;
            background: var(--light);
            border-radius: 12px;
        }
        
        .graph-bar {
            flex: 1;
            background: linear-gradient(to top, var(--primary), var(--primary-light));
            border-radius: 8px 8px 0 0;
            position: relative;
            min-width: 30px;
            transition: height 0.5s ease;
        }
        
        .graph-bar span {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: var(--gray);
            white-space: nowrap;
        }
        
        .graph-bar::after {
            content: attr(data-value);
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            -o-object-fit: cover;
               object-fit: cover;
            margin: 0 auto 20px;
            display: block;
            border: 4px solid var(--primary);
        }

        .app-container { max-width: 100%; min-height: 100vh; }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 15px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }

        .header-left { display: flex; align-items: center; gap: 15px; }
        .menu-btn { background: none; border: none; color: var(--white); font-size: 1.5rem; cursor: pointer; padding: 5px; }
        .logo { display: flex; align-items: center; gap: 10px; }
        .logo img { width: 40px; height: 40px; border-radius: 50%; }
        .logo-text {
            font-weight: 800;
            font-size: 1.25rem;
            background: linear-gradient(120deg, #fff 0%, #f4a020 50%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.3px;
            font-family: 'Poppins', sans-serif;
            position: relative;
            text-transform: capitalize;
            animation: brandGlow 3s ease-in-out infinite;
            filter: drop-shadow(0 2px 6px rgba(244, 160, 32, 0.25));
        }

        @keyframes brandGlow {
            0%, 100% { transform: translateY(0px) scaleY(1); }
            50% { transform: translateY(-1px) scaleY(1.02); }
        }
        .header-right { display: flex; align-items: center; gap: 15px; }

        .notification-btn {
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.3rem;
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 50%;
            font-weight: 600;
        }

        .user-balance {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, rgba(244, 160, 32, 0.25), rgba(244, 160, 32, 0.15));
            padding: 10px 18px;
            border-radius: 14px;
            border: 1.5px solid rgba(244, 160, 32, 0.4);
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 15px rgba(244, 160, 32, 0.15);
        }

        #headerBalanceLabel {
            font-size: 0.85rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-amount {
            font-weight: 800;
            color: #f4a020;
            font-size: 1.3rem;
            min-width: 80px;
            max-width: 120px;
            text-align: right;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .refresh-btn {
            background: none;
            border: none;
            color: var(--white);
            cursor: pointer;
            font-size: 0.9rem;
            transition: transform 0.3s;
        }

        .refresh-btn:hover { transform: rotate(180deg); }
        .refresh-btn.spinning { animation: spin 1s linear infinite; }
       .balance-grid {
    grid-template-columns: 1fr auto;
}

@media (max-width: 640px) {
    .balance-grid {
        grid-template-columns: 1fr !important;
    }
    .balance-grid > div:last-child {
        margin-top: 10px;
        width: 100%;
        text-align: left !important;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
}

        /* Mobile responsive styles */
        @media (max-width: 640px) {
            .user-balance {
                gap: 6px;
                padding: 8px 12px;
            }
            
            #headerBalanceLabel {
                display: none;
            }
            
            .balance-amount {
                font-size: 1.1rem;
                min-width: 60px;
                max-width: 90px;
            }
            
            .header-right {
                gap: 10px;
            }
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100vh;
            background: var(--white);
            z-index: 2000;
            transition: left 0.3s ease;
            box-shadow: 5px 0 20px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .sidebar.open { left: 0; }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
            display: none;
        }

        .sidebar-overlay.show { display: block; }

        .sidebar-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 25px 20px;
        }

        .sidebar-user { display: flex; align-items: center; gap: 15px; }

        .user-avatar {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .user-info h3 { font-weight: 600; font-size: 1rem; }
        .user-info p { font-size: 0.85rem; opacity: 0.8; }
        .sidebar-menu { padding: 20px 0; display: flex; flex-direction: column; }
        
        .sidebar-menu .menu-item:not(:last-child):not(.menu-divider) { border-bottom: 1px solid rgba(0,0,0,0.02); }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 25px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            font-family: inherit;
            font-size: 0.95rem;
            min-height: 50px;
            justify-content: flex-start;
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(26, 95, 42, 0.1);
            color: var(--primary);
            border-left: 4px solid var(--primary);
            padding-left: 21px;
        }

        .menu-item span.menu-text {
            position: relative;
        }

        .menu-item.active span.menu-text::after,
        .menu-item:hover span.menu-text::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 2px;
        }

        .menu-item i { width: 25px; text-align: center; }
        .menu-divider { height: 1px; background: var(--border); margin: 15px 20px; }
        .main-content { padding-top: 70px; padding-bottom: 20px; min-height: 100vh; }

        .page {
            display: none;
            padding: 0;
            animation: fadeIn 0.4s ease;
        }
        
        .page-content {
            padding: 0 20px 20px 20px;
        }

        .page.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-section {
            background: url('welcome.png') center center / cover no-repeat;
            border-radius: 0;
            padding: 20px;
            margin: 0 0 20px 0;
            position: relative;
        }

        .hero-section::before {
            display: none;
        }

        .hero-section > * {
            position: relative;
            z-index: 1;
        }

        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .balance-card {
            background: linear-gradient(145deg, var(--primary) 0%, var(--primary-dark) 50%, #0a2d12 100%);
            color: var(--white);
            text-align: center;
            padding: 35px 25px;
            border-radius: 24px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(26, 95, 42, 0.25);
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .balance-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary), #e67e22, var(--secondary));
        }

        .balance-label { 
            font-size: 0.95rem; 
            opacity: 0.95; 
            margin-bottom: 8px;
            font-weight: 400;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .balance-value { 
            font-size: 1.8rem; 
            font-weight: 700; 
            text-shadow: 0 2px 8px rgba(0,0,0,0.2);
            letter-spacing: 0.5px;
            margin: 8px 0;
        }

        .balance-bonus { 
            color: var(--secondary); 
            font-size: 0.9rem; 
            margin-top: 12px;
            background: rgba(244, 160, 32, 0.15);
            padding: 10px 18px;
            border-radius: 30px;
            display: inline-block;
            font-weight: 500;
            border: 1px solid rgba(244, 160, 32, 0.3);
        }

        .balance-bonus i {
            animation: giftShake 1.5s ease-in-out infinite;
            margin-right: 6px;
        }

        .quick-actions { 
            display: flex;
            flex-direction: column;
            gap: 12px; 
            margin-top: 20px; 
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .action-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 25px 15px;
            background: rgba(13, 61, 24, 0.85);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--white);
            gap: 12px;
            font-family: inherit;
        }

        .action-card i {
            font-size: 1.8rem;
            color: var(--secondary);
        }

        .action-card span {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--white);
        }

        .action-card:hover {
            background: rgba(13, 61, 24, 0.95);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-color: rgba(244, 160, 32, 0.3);
        }

        .action-card:active {
            transform: translateY(0) scale(0.98);
        }

        .action-btn {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
            padding: 18px 22px;
            background: var(--white);
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            color: var(--dark);
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--primary), var(--primary-light));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .action-btn:hover::before {
            opacity: 1;
        }

        .action-btn:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(26,95,42,0.18);
            background: linear-gradient(90deg, rgba(26, 95, 42, 0.03), var(--white));
        }

        .action-btn:active {
            transform: translateX(2px) scale(0.98);
        }

        .action-btn i { 
            font-size: 1.5rem; 
            color: var(--primary);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(26, 95, 42, 0.1), rgba(45, 139, 66, 0.1));
            border-radius: 14px;
            flex-shrink: 0;
        }

        .action-btn span { 
            font-weight: 600; 
            font-size: 1rem;
            color: var(--dark);
        }

        .action-btn .action-arrow {
            margin-left: auto;
            color: var(--gray);
            font-size: 1rem;
            transition: transform 0.3s, color 0.3s;
        }

        .action-btn:hover .action-arrow {
            transform: translateX(5px);
            color: var(--primary);
        }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--dark); }
        .form-label i { color: var(--primary); margin-right: 8px; }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            background: var(--white);
            color: var(--dark);
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26,95,42,0.1);
        }

        .phone-wrapper { display: flex; }

        .phone-prefix {
            background: var(--light);
            padding: 14px 15px;
            border: 2px solid var(--border);
            border-right: none;
            border-radius: 12px 0 0 12px;
            font-weight: 500;
            color: var(--dark);
        }

        .phone-wrapper .form-input { border-radius: 0 12px 12px 0; }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(26,95,42,0.3);
        }

        .btn-secondary { background: var(--secondary); color: var(--dark); }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: var(--white); }
        .btn-link { background: #0066cc; color: var(--white); }
        .btn-link:hover { background: #0052a3; }
        .btn:disabled { opacity: 0.7; cursor: not-allowed; }
        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }

        .btn .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .divider-text {
            display: flex;
            align-items: center;
            margin: 15px 0;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .divider-text::before, .divider-text::after { content: ''; flex: 1; height: 1px; background: var(--border); }
        .divider-text span { padding: 0 15px; }

        .info-box {
            background: rgba(26, 95, 42, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }

        .info-box p { font-size: 0.9rem; color: var(--dark); }

        /* Network Selector Styles */
        .network-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .network-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            border: 3px solid var(--border);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--white);
            min-width: 90px;
        }

        .network-option:hover {
            border-color: var(--primary-light);
            transform: translateY(-2px);
        }

        .network-option.selected {
            border-color: var(--primary);
            background: rgba(26, 95, 42, 0.1);
            box-shadow: 0 0 0 3px rgba(26, 95, 42, 0.2);
        }

        .network-option img {
            width: 50px;
            height: 50px;
            -o-object-fit: contain;
               object-fit: contain;
            margin-bottom: 8px;
        }

        .network-option span {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--dark);
        }

        .validation-error {
            color: var(--danger);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }

        .validation-error.show {
            display: block;
        }

        .form-input.valid {
            border-color: var(--success);
        }

        .form-input.invalid {
            border-color: var(--danger);
        }

        .network-error {
            color: var(--danger);
            font-size: 0.85rem;
            text-align: center;
            margin-bottom: 15px;
            display: none;
        }

        .network-error.show {
            display: block;
        }

        .transaction-list { max-height: 400px; overflow-y: auto; }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
        }

        .transaction-item:hover { background: var(--light); }
        .transaction-item:last-child { border-bottom: none; }
        .transaction-info { display: flex; align-items: center; gap: 12px; }

        .transaction-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .transaction-icon.deposit { background: rgba(40, 167, 69, 0.15); color: var(--success); }
        .transaction-icon.airtime { background: rgba(23, 162, 184, 0.15); color: var(--info); }
        .transaction-icon.failed { background: rgba(220, 53, 69, 0.15); color: var(--danger); }
        .transaction-icon.pending { background: rgba(255, 193, 7, 0.15); color: var(--warning); }
        .transaction-details h4 { font-size: 0.95rem; font-weight: 500; margin-bottom: 3px; }
        .transaction-details p { font-size: 0.8rem; color: var(--gray); }
        .transaction-amount { text-align: right; }
        .transaction-amount .amount { font-weight: 600; font-size: 1rem; }
        .transaction-amount .bonus { color: var(--success); font-size: 0.8rem; }
        .transaction-amount .status { font-size: 0.75rem; padding: 3px 8px; border-radius: 20px; }
        .status-completed { background: rgba(40, 167, 69, 0.15); color: var(--success); }
        .status-pending { background: rgba(255, 193, 7, 0.15); color: #856404; }
        .status-failed { background: rgba(220, 53, 69, 0.15); color: var(--danger); }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .modal.show { display: flex; }

        .modal-content {
            background: linear-gradient(135deg, var(--white) 0%, rgba(245,245,245,0.98) 100%);
            border-radius: 24px;
            width: 100%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlide 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 25px 60px rgba(0,0,0,0.25), 0 0 60px rgba(26, 95, 42, 0.1);
            border: 1px solid rgba(26, 95, 42, 0.1);
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: scale(0.85) translateY(30px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-header {
            padding: 30px 25px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: var(--white);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 24px 24px 0 0;
        }

        .modal-header h3 { font-size: 1.4rem; font-weight: 700; color: var(--white); display: flex; align-items: center; gap: 12px; }
        .modal-close { background: rgba(255,255,255,0.2); border: none; font-size: 1.8rem; cursor: pointer; color: var(--white); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
        .modal-close:hover { background: rgba(255,255,255,0.35); transform: rotate(90deg); }
        .modal-body { padding: 30px 25px; }
        .modal-footer { padding: 15px 20px; border-top: 1px solid var(--border); display: flex; gap: 10px; }

        .notification-panel {
            position: fixed;
            top: 70px;
            right: 10px;
            width: 320px;
            max-height: 400px;
            background: var(--white);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 2500;
            display: none;
            overflow: hidden;
        }

        .notification-panel.show { display: block; animation: slideDown 0.3s ease; }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .notification-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h4 { font-weight: 600; color: var(--primary); }
        .notification-list { max-height: 300px; overflow-y: auto; }

        .notification-item {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
            background: rgba(26, 95, 42, 0.08);
        }

        .notification-item:hover { background: rgba(26, 95, 42, 0.15); }
        .notification-item.unread { background: rgba(26, 95, 42, 0.18); }
        .notification-item h5 { font-size: 0.9rem; font-weight: 500; margin-bottom: 5px; }
        .notification-item p { font-size: 0.8rem; color: var(--gray); }
        .notification-item .time { font-size: 0.75rem; color: var(--gray); margin-top: 5px; }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: var(--white);
            padding: 15px 25px;
            border-radius: 12px;
            z-index: 4000;
            display: none;
            animation: toastSlide 0.3s ease;
            max-width: 90%;
        }

        .toast.show { display: flex; align-items: center; gap: 10px; }

        @keyframes toastSlide {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }

        .toast.success { background: var(--success); }
        .toast.error { background: var(--danger); }
        .toast.info { background: var(--info); }
        .toast.delay { background: #6c5ce7; }
        .toast.cancel { background: #e74c3c; }

        .retry-btn {
            display: none;
            margin-top: 15px;
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--warning), #e67e22);
            color: var(--dark);
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .retry-btn.show { display: flex; }
        .retry-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(230, 126, 34, 0.3); }

        .status-cancelled { background: rgba(220, 53, 69, 0.15); color: var(--danger); }
        .status-delay { background: rgba(108, 92, 231, 0.15); color: #6c5ce7; }

        .live-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            margin-right: 5px;
            animation: livePulse 1.5s ease-in-out infinite;
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }

        .coming-soon-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border-radius: 16px;
        }

        .coming-soon-badge {
            background: linear-gradient(135deg, var(--secondary), #e67e22);
            color: var(--white);
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 20px rgba(244,160,32,0.4);
        }

        .rate-display {
            text-align: center;
            padding: 20px;
            background: var(--light);
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .rate-display .rate {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .dial-code {
            background: var(--dark);
            color: var(--white);
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--white);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .stat-card i { font-size: 2rem; color: var(--primary); margin-bottom: 10px; }
        .stat-card .value { font-size: 1.5rem; font-weight: 700; color: var(--dark); }
        .stat-card .label { font-size: 0.85rem; color: var(--gray); }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .admin-tab {
            padding: 10px 20px;
            border: none;
            background: var(--light);
            border-radius: 10px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s;
        }

        .admin-tab.active { background: var(--primary); color: white; }
        .table-responsive { overflow-x: auto; }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th { background: var(--light); font-weight: 600; }

        .empty-state { text-align: center; padding: 40px 20px; color: var(--gray); }
        .empty-state i { font-size: 4rem; margin-bottom: 15px; opacity: 0.5; }
        .empty-state h3 { font-size: 1.2rem; margin-bottom: 10px; }
        .empty-state p { font-size: 0.9rem; }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--gray);
            font-size: 0.85rem;
            cursor: pointer;
        }

        .footer-link:hover { color: var(--primary); }

        .pwa-install {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
            background: #000000;
            color: var(--white);
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            margin-top: 20px;
        }

        .pwa-install p {
            color: #ffffff;
            font-size: 0.9rem;
            margin: 0;
        }

        @media (max-width: 480px) {
            .header { padding: 12px 15px; }
            .logo-text { font-size: 0.9rem; }
            .quick-actions { flex-direction: column; gap: 10px; }
            .action-btn { padding: 15px 18px; }
            .action-btn i:first-child { width: 44px; height: 44px; font-size: 1.3rem; }
            .balance-value { font-size: 1.6rem; }
            .notification-panel { right: 5px; left: 5px; width: auto; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .welcome-page {
            min-height: calc(100vh - 70px);
            background: linear-gradient(180deg, #f8f9fa 0%, #e8f5e9 50%, #c8e6c9 100%);
        }

        .welcome-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.6)), url('welcome.png') center center / cover no-repeat;
            color: white;
            padding: 60px 20px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .welcome-hero::before {
            display: none;
        }

        .welcome-hero h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
        }

        .welcome-hero p {
            font-size: 1.1rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto 25px;
            line-height: 1.6;
        }

        .welcome-get-started-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--secondary), #e67e22);
            color: white;
            font-size: 1.1rem;
            font-weight: 700;
            padding: 16px 40px;
            border-radius: 50px;
            text-decoration: none;
            cursor: pointer;
            border: none;
            margin-top: 10px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(244, 160, 32, 0.4);
            position: relative;
            overflow: hidden;
            animation: pulse-btn 2s ease-in-out infinite;
            transition: all 0.3s ease;
        }

        .welcome-get-started-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 2.5s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        @keyframes pulse-btn {
            0%, 100% { transform: scale(1); box-shadow: 0 8px 25px rgba(244, 160, 32, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 12px 35px rgba(244, 160, 32, 0.6); }
        }

        .welcome-get-started-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 15px 40px rgba(244, 160, 32, 0.5);
        }

        .welcome-get-started-btn:active {
            transform: scale(0.98);
        }

        .welcome-tagline {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 10px;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .welcome-highlights {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .welcome-highlight-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            opacity: 0.95;
        }

        .welcome-highlight-item i {
            color: var(--secondary);
        }

        .welcome-features {
            padding: 30px 20px;
        }

        .welcome-feature-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            align-items: flex-start;
            gap: 15px;
            transition: transform 0.3s;
        }

        .welcome-feature-card:hover {
            transform: translateY(-3px);
        }

        .welcome-feature-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .welcome-quick-links {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 20px;
        }

        .welcome-quick-link {
            background: white;
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .welcome-quick-link:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .welcome-quick-link i {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .welcome-cta {
            text-align: center;
            padding: 30px 20px 50px;
        }

        .welcome-cta-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 18px 50px;
            font-size: 1.2rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(26,95,42,0.35);
            transition: all 0.3s;
        }

        .welcome-cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(26,95,42,0.45);
        }
 

    </style>
  <script type="module">"use strict";(()=>{var P="0.4.4";var v={HIGHLIGHT_COLOR:"#0079F2",HIGHLIGHT_BG:"#0079F210",ALLOWED_DOMAIN:".replit.dev",THEME_PREVIEW_STYLE_ID:"replit-theme-preview",MAX_SIBLING_HIGHLIGHTERS:1e3,MAX_DESCENDANTS_FOR_SCREENSHOT:1500},Z=`
  [contenteditable] {
    outline: none !important;
  }

  [contenteditable]:focus {
    outline: none !important;
  }
`,ee=`
  .beacon-highlighter {
    content: '';
    position: absolute;
    z-index: ${Number.MAX_SAFE_INTEGER-3};
    box-sizing: border-box;
    pointer-events: none;
    outline: 2px dashed ${v.HIGHLIGHT_COLOR} !important;
    outline-offset: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    background: ${v.HIGHLIGHT_BG} !important;
    opacity: 0;
  }
  
  .beacon-hover-highlighter {
    position: fixed;
    z-index: ${Number.MAX_SAFE_INTEGER};
  }
  
  .beacon-selected-highlighter {
    position: fixed;
    pointer-events: none;
    outline: 2px solid ${v.HIGHLIGHT_COLOR} !important;
    outline-offset: 3px !important;
    background: none !important;
  }
  
  .beacon-label {
    position: absolute;
    background-color: ${v.HIGHLIGHT_COLOR};
    color: #FFFFFF;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    font-family: monospace;
    line-height: 1;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transform: translateY(-100%);
    margin-top: -4px;
    left: 0;
    z-index: ${Number.MAX_SAFE_INTEGER-2};
    pointer-events: none;
    opacity: 0;
  }
  
  .beacon-hover-label {
    position: fixed;
    z-index: ${Number.MAX_SAFE_INTEGER};
  }
  
  .beacon-selected-label {
    position: fixed;
    pointer-events: none;
  }
  
  .beacon-sibling-highlighter {
    position: fixed;
    pointer-events: none;
    outline: 2px dashed ${v.HIGHLIGHT_COLOR} !important;
    outline-offset: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    background: ${v.HIGHLIGHT_BG} !important;
  }
`;function Me(e,i){return e[13]=1,e[14]=i>>8,e[15]=i&255,e[16]=i>>8,e[17]=i&255,e}var le=112,ae=72,ce=89,he=115,G;function Re(){let e=new Int32Array(256);for(let i=0;i<256;i++){let t=i;for(let n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[i]=t}return e}function De(e){let i=-1;G||(G=Re());for(let t=0;t<e.length;t++)i=G[(i^e[t])&255]^i>>>8;return i^-1}function Oe(e){let i=e.length-1;for(let t=i;t>=4;t--)if(e[t-4]===9&&e[t-3]===le&&e[t-2]===ae&&e[t-1]===ce&&e[t]===he)return t-3;return 0}function Pe(e,i,t=!1){let n=new Uint8Array(13);i*=39.3701,n[0]=le,n[1]=ae,n[2]=ce,n[3]=he,n[4]=i>>>24,n[5]=i>>>16,n[6]=i>>>8,n[7]=i&255,n[8]=n[4],n[9]=n[5],n[10]=n[6],n[11]=n[7],n[12]=1;let s=De(n),r=new Uint8Array(4);if(r[0]=s>>>24,r[1]=s>>>16,r[2]=s>>>8,r[3]=s&255,t){let l=Oe(e);return e.set(n,l),e.set(r,l+13),e}else{let l=new Uint8Array(4);l[0]=0,l[1]=0,l[2]=0,l[3]=9;let o=new Uint8Array(54);return o.set(e,0),o.set(l,33),o.set(n,37),o.set(r,50),o}}var de="[modern-screenshot]",H=typeof window<"u",Fe=H&&"Worker"in window,ke=H&&"atob"in window,Yt=H&&"btoa"in window,V=H?window.navigator?.userAgent:"",ue=V.includes("Chrome"),F=V.includes("AppleWebKit")&&!ue,j=V.includes("Firefox"),Ue=e=>e&&"__CONTEXT__"in e,$e=e=>e.constructor.name==="CSSFontFaceRule",Be=e=>e.constructor.name==="CSSImportRule",S=e=>e.nodeType===1,N=e=>typeof e.className=="object",ge=e=>e.tagName==="image",Ge=e=>e.tagName==="use",x=e=>S(e)&&typeof e.style<"u"&&!N(e),We=e=>e.nodeType===8,Ve=e=>e.nodeType===3,L=e=>e.tagName==="IMG",k=e=>e.tagName==="VIDEO",je=e=>e.tagName==="CANVAS",qe=e=>e.tagName==="TEXTAREA",ze=e=>e.tagName==="INPUT",Xe=e=>e.tagName==="STYLE",Ye=e=>e.tagName==="SCRIPT",Ke=e=>e.tagName==="SELECT",Je=e=>e.tagName==="SLOT",Qe=e=>e.tagName==="IFRAME",Ze=(...e)=>console.warn(de,...e);function et(e){let i=e?.createElement?.("canvas");return i&&(i.height=i.width=1),!!i&&"toDataURL"in i&&!!i.toDataURL("image/webp").includes("image/webp")}var W=e=>e.startsWith("data:");function me(e,i){if(e.match(/^[a-z]+:\/\//i))return e;if(H&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!H)return e;let t=U().implementation.createHTMLDocument(),n=t.createElement("base"),s=t.createElement("a");return t.head.appendChild(n),t.body.appendChild(s),i&&(n.href=i),s.href=e,s.href}function U(e){return(e&&S(e)?e?.ownerDocument:e)??window.document}var $="http://www.w3.org/2000/svg";function tt(e,i,t){let n=U(t).createElementNS($,"svg");return n.setAttributeNS(null,"width",e.toString()),n.setAttributeNS(null,"height",i.toString()),n.setAttributeNS(null,"viewBox",`0 0 ${e} ${i}`),n}function it(e,i){let t=new XMLSerializer().serializeToString(e);return i&&(t=t.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`}async function nt(e,i="image/png",t=1){try{return await new Promise((n,s)=>{e.toBlob(r=>{r?n(r):s(new Error("Blob is null"))},i,t)})}catch(n){if(ke)return rt(e.toDataURL(i,t));throw n}}function rt(e){let[i,t]=e.split(","),n=i.match(/data:(.+);/)?.[1]??void 0,s=window.atob(t),r=s.length,l=new Uint8Array(r);for(let o=0;o<r;o+=1)l[o]=s.charCodeAt(o);return new Blob([l],{type:n})}function fe(e,i){return new Promise((t,n)=>{let s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>n(s.error),s.onabort=()=>n(new Error(`Failed read blob to ${i}`)),i==="dataUrl"?s.readAsDataURL(e):i==="arrayBuffer"&&s.readAsArrayBuffer(e)})}var st=e=>fe(e,"dataUrl"),ot=e=>fe(e,"arrayBuffer");function C(e,i){let t=U(i).createElement("img");return t.decoding="sync",t.loading="eager",t.src=e,t}function _(e,i){return new Promise(t=>{let{timeout:n,ownerDocument:s,onError:r,onWarn:l}=i??{},o=typeof e=="string"?C(e,U(s)):e,c=null,h=null;function a(){t(o),c&&clearTimeout(c),h?.()}if(n&&(c=setTimeout(a,n)),k(o)){let d=o.currentSrc||o.src;if(!d)return o.poster?_(o.poster,i).then(t):a();if(o.readyState>=2)return a();let u=a,m=g=>{l?.("Failed video load",d,g),r?.(g),a()};h=()=>{o.removeEventListener("loadeddata",u),o.removeEventListener("error",m)},o.addEventListener("loadeddata",u,{once:!0}),o.addEventListener("error",m,{once:!0})}else{let d=ge(o)?o.href.baseVal:o.currentSrc||o.src;if(!d)return a();let u=async()=>{if(L(o)&&"decode"in o)try{await o.decode()}catch(g){l?.("Failed to decode image, trying to render anyway",o.dataset.originalSrc||d,g)}a()},m=g=>{l?.("Failed image load",o.dataset.originalSrc||d,g),a()};if(L(o)&&o.complete)return u();h=()=>{o.removeEventListener("load",u),o.removeEventListener("error",m)},o.addEventListener("load",u,{once:!0}),o.addEventListener("error",m,{once:!0})}})}async function lt(e,i){x(e)&&(L(e)||k(e)?await _(e,i):await Promise.all(["img","video"].flatMap(t=>Array.from(e.querySelectorAll(t)).map(n=>_(n,i)))))}var pe=function(){let i=0,t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(i+=1,`u${t()}${i}`)}();function be(e){return e?.split(",").map(i=>i.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}var te=0;function at(e){let i=`${de}[#${te}]`;return te++,{time:t=>e&&console.time(`${i} ${t}`),timeEnd:t=>e&&console.timeEnd(`${i} ${t}`),warn:(...t)=>e&&Ze(...t)}}function ct(e){return{cache:e?"no-cache":"force-cache"}}async function q(e,i){return Ue(e)?e:ht(e,{...i,autoDestruct:!0})}async function ht(e,i){let{scale:t=1,workerUrl:n,workerNumber:s=1}=i||{},r=!!i?.debug,l=i?.features??!0,o=e.ownerDocument??(H?window.document:void 0),c=e.ownerDocument?.defaultView??(H?window:void 0),h=new Map,a={width:0,height:0,quality:1,type:"image/png",scale:t,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:r,fetch:{requestInit:ct(i?.fetch?.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1,...i?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:s,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...i,__CONTEXT__:!0,log:at(r),node:e,ownerDocument:o,ownerWindow:c,dpi:t===1?null:96*t,svgStyleElement:Ee(o),svgDefsElement:o?.createElementNS($,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:Fe&&n&&s?s:0})].map(()=>{try{let m=new Worker(n);return m.onmessage=async g=>{let{url:f,result:p}=g.data;p?h.get(f)?.resolve?.(p):h.get(f)?.reject?.(new Error(`Error receiving message from worker: ${f}`))},m.onmessageerror=g=>{let{url:f}=g.data;h.get(f)?.reject?.(new Error(`Error receiving message from worker: ${f}`))},m}catch(m){return a.log.warn("Failed to new Worker",m),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[et(o)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:h,drawImageCount:0,tasks:[],features:l,isEnable:m=>m==="restoreScrollPosition"?typeof l=="boolean"?!1:l[m]??!1:typeof l=="boolean"?l:l[m]??!0};a.log.time("wait until load"),await lt(e,{timeout:a.timeout,onWarn:a.log.warn}),a.log.timeEnd("wait until load");let{width:d,height:u}=dt(e,a);return a.width=d,a.height=u,a}function Ee(e){if(!e)return;let i=e.createElement("style"),t=i.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return i.appendChild(t),i}function dt(e,i){let{width:t,height:n}=i;if(S(e)&&(!t||!n)){let s=e.getBoundingClientRect();t=t||s.width||Number(e.getAttribute("width"))||0,n=n||s.height||Number(e.getAttribute("height"))||0}return{width:t,height:n}}async function ut(e,i){let{log:t,timeout:n,drawImageCount:s,drawImageInterval:r}=i;t.time("image to canvas");let l=await _(e,{timeout:n,onWarn:i.log.warn}),{canvas:o,context2d:c}=gt(e.ownerDocument,i),h=()=>{try{c?.drawImage(l,0,0,o.width,o.height)}catch(a){i.log.warn("Failed to drawImage",a)}};if(h(),i.isEnable("fixSvgXmlDecode"))for(let a=0;a<s;a++)await new Promise(d=>{setTimeout(()=>{h(),d()},a+r)});return i.drawImageCount=0,t.timeEnd("image to canvas"),o}function gt(e,i){let{width:t,height:n,scale:s,backgroundColor:r,maximumCanvasSize:l}=i,o=e.createElement("canvas");o.width=Math.floor(t*s),o.height=Math.floor(n*s),o.style.width=`${t}px`,o.style.height=`${n}px`,l&&(o.width>l||o.height>l)&&(o.width>l&&o.height>l?o.width>o.height?(o.height*=l/o.width,o.width=l):(o.width*=l/o.height,o.height=l):o.width>l?(o.height*=l/o.width,o.width=l):(o.width*=l/o.height,o.height=l));let c=o.getContext("2d");return c&&r&&(c.fillStyle=r,c.fillRect(0,0,o.width,o.height)),{canvas:o,context2d:c}}function ve(e,i){if(e.ownerDocument)try{let r=e.toDataURL();if(r!=="data:,")return C(r,e.ownerDocument)}catch(r){i.log.warn("Failed to clone canvas",r)}let t=e.cloneNode(!1),n=e.getContext("2d"),s=t.getContext("2d");try{return n&&s&&s.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(r){i.log.warn("Failed to clone canvas",r)}return t}function mt(e,i){try{if(e?.contentDocument?.body)return z(e.contentDocument.body,i)}catch(t){i.log.warn("Failed to clone iframe",t)}return e.cloneNode(!1)}function ft(e){let i=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(i.src=e.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager"),i}async function pt(e,i){if(e.ownerDocument&&!e.currentSrc&&e.poster)return C(e.poster,e.ownerDocument);let t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);let n=t.ownerDocument;if(n){let s=!0;if(await _(t,{onError:()=>s=!1,onWarn:i.log.warn}),!s)return e.poster?C(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,await new Promise(l=>{t.addEventListener("seeked",l,{once:!0})});let r=n.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;try{let l=r.getContext("2d");l&&l.drawImage(t,0,0,r.width,r.height)}catch(l){return i.log.warn("Failed to clone video",l),e.poster?C(e.poster,e.ownerDocument):t}return ve(r,i)}return t}function bt(e,i){return je(e)?ve(e,i):Qe(e)?mt(e,i):L(e)?ft(e):k(e)?pt(e,i):e.cloneNode(!1)}function Et(e){let i=e.sandbox;if(!i){let{ownerDocument:t}=e;try{t&&(i=t.createElement("iframe"),i.id=`__SANDBOX__-${pe()}`,i.width="0",i.height="0",i.style.visibility="hidden",i.style.position="fixed",t.body.appendChild(i),i.contentWindow?.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),e.sandbox=i)}catch(n){e.log.warn("Failed to getSandBox",n)}}return i}var vt=["width","height","-webkit-text-fill-color"],wt=["stroke","fill"];function we(e,i,t){let{defaultComputedStyles:n}=t,s=e.nodeName.toLowerCase(),r=N(e)&&s!=="svg",l=r?wt.map(f=>[f,e.getAttribute(f)]).filter(([,f])=>f!==null):[],o=[r&&"svg",s,l.map((f,p)=>`${f}=${p}`).join(","),i].filter(Boolean).join(":");if(n.has(o))return n.get(o);let h=Et(t)?.contentWindow;if(!h)return new Map;let a=h?.document,d,u;r?(d=a.createElementNS($,"svg"),u=d.ownerDocument.createElementNS(d.namespaceURI,s),l.forEach(([f,p])=>{u.setAttributeNS(null,f,p)}),d.appendChild(u)):d=u=a.createElement(s),u.textContent=" ",a.body.appendChild(d);let m=h.getComputedStyle(u,i),g=new Map;for(let f=m.length,p=0;p<f;p++){let b=m.item(p);vt.includes(b)||g.set(b,m.getPropertyValue(b))}return a.body.removeChild(d),n.set(o,g),g}function ye(e,i,t){let n=new Map,s=[],r=new Map;if(t)for(let o of t)l(o);else for(let o=e.length,c=0;c<o;c++){let h=e.item(c);l(h)}for(let o=s.length,c=0;c<o;c++)r.get(s[c])?.forEach((h,a)=>n.set(a,h));function l(o){let c=e.getPropertyValue(o),h=e.getPropertyPriority(o),a=o.lastIndexOf("-"),d=a>-1?o.substring(0,a):void 0;if(d){let u=r.get(d);u||(u=new Map,r.set(d,u)),u.set(o,[c,h])}i.get(o)===c&&!h||(d?s.push(d):n.set(o,[c,h]))}return n}function yt(e,i,t,n){let{ownerWindow:s,includeStyleProperties:r,currentParentNodeStyle:l}=n,o=i.style,c=s.getComputedStyle(e),h=we(e,null,n);l?.forEach((d,u)=>{h.delete(u)});let a=ye(c,h,r);a.delete("transition-property"),a.delete("all"),a.delete("d"),a.delete("content"),t&&(a.delete("margin-top"),a.delete("margin-right"),a.delete("margin-bottom"),a.delete("margin-left"),a.delete("margin-block-start"),a.delete("margin-block-end"),a.delete("margin-inline-start"),a.delete("margin-inline-end"),a.set("box-sizing",["border-box",""])),a.get("background-clip")?.[0]==="text"&&i.classList.add("______background-clip--text"),ue&&(a.has("font-kerning")||a.set("font-kerning",["normal",""]),(a.get("overflow-x")?.[0]==="hidden"||a.get("overflow-y")?.[0]==="hidden")&&a.get("text-overflow")?.[0]==="ellipsis"&&e.scrollWidth===e.clientWidth&&a.set("text-overflow",["clip",""]));for(let d=o.length,u=0;u<d;u++)o.removeProperty(o.item(u));return a.forEach(([d,u],m)=>{o.setProperty(m,d,u)}),a}function St(e,i){(qe(e)||ze(e)||Ke(e))&&i.setAttribute("value",e.value)}var Tt=[":before",":after"],At=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function Ht(e,i,t,n,s){let{ownerWindow:r,svgStyleElement:l,svgStyles:o,currentNodeStyle:c}=n;if(!l||!r)return;function h(a){let d=r.getComputedStyle(e,a),u=d.getPropertyValue("content");if(!u||u==="none")return;s?.(u),u=u.replace(/(')|(")|(counter\(.+\))/g,"");let m=[pe()],g=we(e,a,n);c?.forEach((E,y)=>{g.delete(y)});let f=ye(d,g,n.includeStyleProperties);f.delete("content"),f.delete("-webkit-locale"),f.get("background-clip")?.[0]==="text"&&i.classList.add("______background-clip--text");let p=[`content: '${u}';`];if(f.forEach(([E,y],A)=>{p.push(`${A}: ${E}${y?" !important":""};`)}),p.length===1)return;try{i.className=[i.className,...m].join(" ")}catch(E){n.log.warn("Failed to copyPseudoClass",E);return}let b=p.join(`
  `),w=o.get(b);w||(w=[],o.set(b,w)),w.push(`.${m[0]}:${a}`)}Tt.forEach(h),t&&At.forEach(h)}var ie=new Set(["symbol"]);async function ne(e,i,t,n,s){if(S(t)&&(Xe(t)||Ye(t))||n.filter&&!n.filter(t))return;ie.has(i.nodeName)||ie.has(t.nodeName)?n.currentParentNodeStyle=void 0:n.currentParentNodeStyle=n.currentNodeStyle;let r=await z(t,n,!1,s);n.isEnable("restoreScrollPosition")&&Ct(e,r),i.appendChild(r)}async function re(e,i,t,n){let s=(S(e)?e.shadowRoot?.firstChild:void 0)??e.firstChild;for(let r=s;r;r=r.nextSibling)if(!We(r))if(S(r)&&Je(r)&&typeof r.assignedNodes=="function"){let l=r.assignedNodes();for(let o=0;o<l.length;o++)await ne(e,i,l[o],t,n)}else await ne(e,i,r,t,n)}function Ct(e,i){if(!x(e)||!x(i))return;let{scrollTop:t,scrollLeft:n}=e;if(!t&&!n)return;let{transform:s}=i.style,r=new DOMMatrix(s),{a:l,b:o,c,d:h}=r;r.a=1,r.b=0,r.c=0,r.d=1,r.translateSelf(-n,-t),r.a=l,r.b=o,r.c=c,r.d=h,i.style.transform=r.toString()}function Lt(e,i){let{backgroundColor:t,width:n,height:s,style:r}=i,l=e.style;if(t&&l.setProperty("background-color",t,"important"),n&&l.setProperty("width",`${n}px`,"important"),s&&l.setProperty("height",`${s}px`,"important"),r)for(let o in r)l[o]=r[o]}var xt=/^[\w-:]+$/;async function z(e,i,t=!1,n){let{ownerDocument:s,ownerWindow:r,fontFamilies:l}=i;if(s&&Ve(e))return n&&/\S/.test(e.data)&&n(e.data),s.createTextNode(e.data);if(s&&r&&S(e)&&(x(e)||N(e))){let c=await bt(e,i);if(i.isEnable("removeAbnormalAttributes")){let g=c.getAttributeNames();for(let f=g.length,p=0;p<f;p++){let b=g[p];xt.test(b)||c.removeAttribute(b)}}let h=i.currentNodeStyle=yt(e,c,t,i);t&&Lt(c,i);let a=!1;if(i.isEnable("copyScrollbar")){let g=[h.get("overflow-x")?.[0],h.get("overflow-y")?.[0]];a=g.includes("scroll")||(g.includes("auto")||g.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}let d=h.get("text-transform")?.[0],u=be(h.get("font-family")?.[0]),m=u?g=>{d==="uppercase"?g=g.toUpperCase():d==="lowercase"?g=g.toLowerCase():d==="capitalize"&&(g=g[0].toUpperCase()+g.substring(1)),u.forEach(f=>{let p=l.get(f);p||l.set(f,p=new Set),g.split("").forEach(b=>p.add(b))})}:void 0;return Ht(e,c,a,i,m),St(e,c),k(e)||await re(e,c,i,m),c}let o=e.cloneNode(!1);return await re(e,o,i),o}function _t(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(i){e.log.warn("Failed to destroyContext",i)}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}function It(e){let{url:i,timeout:t,responseType:n,...s}=e,r=new AbortController,l=t?setTimeout(()=>r.abort(),t):void 0;return fetch(i,{signal:r.signal,...s}).then(o=>{if(!o.ok)throw new Error("Failed fetch, not 2xx response",{cause:o});switch(n){case"arrayBuffer":return o.arrayBuffer();case"dataUrl":return o.blob().then(st);case"text":default:return o.text()}}).finally(()=>clearTimeout(l))}function I(e,i){let{url:t,requestType:n="text",responseType:s="text",imageDom:r}=i,l=t,{timeout:o,acceptOfImage:c,requests:h,fetchFn:a,fetch:{requestInit:d,bypassingCache:u,placeholderImage:m},font:g,workers:f,fontFamilies:p}=e;n==="image"&&(F||j)&&e.drawImageCount++;let b=h.get(t);if(!b){u&&u instanceof RegExp&&u.test(l)&&(l+=(/\?/.test(l)?"&":"?")+new Date().getTime());let w=n.startsWith("font")&&g&&g.minify,E=new Set;w&&n.split(";")[1].split(",").forEach(O=>{p.has(O)&&p.get(O).forEach(Q=>E.add(Q))});let y=w&&E.size,A={url:l,timeout:o,responseType:y?"arrayBuffer":s,headers:n==="image"?{accept:c}:void 0,...d};b={type:n,resolve:void 0,reject:void 0,response:null},b.response=(async()=>{if(a&&n==="image"){let T=await a(t);if(T)return T}return!F&&t.startsWith("http")&&f.length?new Promise((T,O)=>{f[h.size&f.length-1].postMessage({rawUrl:t,...A}),b.resolve=T,b.reject=O}):It(A)})().catch(T=>{if(h.delete(t),n==="image"&&m)return e.log.warn("Failed to fetch image base64, trying to use placeholder image",l),typeof m=="string"?m:m(r);throw T}),h.set(t,b)}return b.response}async function Se(e,i,t,n){if(!Te(e))return e;for(let[s,r]of Nt(e,i))try{let l=await I(t,{url:r,requestType:n?"image":"text",responseType:"dataUrl"});e=e.replace(Mt(s),`$1${l}$3`)}catch(l){t.log.warn("Failed to fetch css data url",s,l)}return e}function Te(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}var Ae=/url\((['"]?)([^'"]+?)\1\)/g;function Nt(e,i){let t=[];return e.replace(Ae,(n,s,r)=>(t.push([r,me(r,i)]),n)),t.filter(([n])=>!W(n))}function Mt(e){let i=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${i})(['"]?\\))`,"g")}var Rt=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Dt(e,i){return Rt.map(t=>{let n=e.getPropertyValue(t);return!n||n==="none"?null:((F||j)&&i.drawImageCount++,Se(n,null,i,!0).then(s=>{!s||n===s||e.setProperty(t,s,e.getPropertyPriority(t))}))}).filter(Boolean)}function Ot(e,i){if(L(e)){let t=e.currentSrc||e.src;if(!W(t))return[I(i,{url:t,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(n=>{n&&(e.srcset="",e.dataset.originalSrc=t,e.src=n||"")})];(F||j)&&i.drawImageCount++}else if(N(e)&&!W(e.href.baseVal)){let t=e.href.baseVal;return[I(i,{url:t,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(n=>{n&&(e.dataset.originalSrc=t,e.href.baseVal=n||"")})]}return[]}function Pt(e,i){let{ownerDocument:t,svgDefsElement:n}=i,s=e.getAttribute("href")??e.getAttribute("xlink:href");if(!s)return[];let[r,l]=s.split("#");if(l){let o=`#${l}`,c=t?.querySelector(`svg ${o}`);if(r&&e.setAttribute("href",o),n?.querySelector(o))return[];if(c)return n?.appendChild(c.cloneNode(!0)),[];if(r)return[I(i,{url:r,responseType:"text"}).then(h=>{n?.insertAdjacentHTML("beforeend",h)})]}return[]}function He(e,i){let{tasks:t}=i;S(e)&&((L(e)||ge(e))&&t.push(...Ot(e,i)),Ge(e)&&t.push(...Pt(e,i))),x(e)&&t.push(...Dt(e.style,i)),e.childNodes.forEach(n=>{He(n,i)})}async function Ft(e,i){let{ownerDocument:t,svgStyleElement:n,fontFamilies:s,fontCssTexts:r,tasks:l,font:o}=i;if(!(!t||!n||!s.size))if(o&&o.cssText){let c=oe(o.cssText,i);n.appendChild(t.createTextNode(`${c}
`))}else{let c=Array.from(t.styleSheets).filter(a=>{try{return"cssRules"in a&&!!a.cssRules.length}catch(d){return i.log.warn(`Error while reading CSS rules from ${a.href}`,d),!1}});await Promise.all(c.flatMap(a=>Array.from(a.cssRules).map(async(d,u)=>{if(Be(d)){let m=u+1,g=d.href,f="";try{f=await I(i,{url:g,requestType:"text",responseType:"text"})}catch(b){i.log.warn(`Error fetch remote css import from ${g}`,b)}let p=f.replace(Ae,(b,w,E)=>b.replace(E,me(E,g)));for(let b of Ut(p))try{a.insertRule(b,b.startsWith("@import")?m+=1:a.cssRules.length)}catch(w){i.log.warn("Error inserting rule from remote css import",{rule:b,error:w})}}}))),c.flatMap(a=>Array.from(a.cssRules)).filter(a=>$e(a)&&Te(a.style.getPropertyValue("src"))&&be(a.style.getPropertyValue("font-family"))?.some(d=>s.has(d))).forEach(a=>{let d=a,u=r.get(d.cssText);u?n.appendChild(t.createTextNode(`${u}
`)):l.push(Se(d.cssText,d.parentStyleSheet?d.parentStyleSheet.href:null,i).then(m=>{m=oe(m,i),r.set(d.cssText,m),n.appendChild(t.createTextNode(`${m}
`))}))})}}var kt=/(\/\*[\s\S]*?\*\/)/g,se=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function Ut(e){if(e==null)return[];let i=[],t=e.replace(kt,"");for(;;){let r=se.exec(t);if(!r)break;i.push(r[0])}t=t.replace(se,"");let n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let r=n.exec(t);if(r)s.lastIndex=n.lastIndex;else if(r=s.exec(t),r)n.lastIndex=s.lastIndex;else break;i.push(r[0])}return i}var $t=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Bt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function oe(e,i){let{font:t}=i,n=t?t?.preferredFormat:void 0;return n?e.replace(Bt,s=>{for(;;){let[r,,l]=$t.exec(s)||[];if(!l)return"";if(l===n)return`src: ${r};`}}):e}async function Gt(e,i){let t=await q(e,i);if(S(t.node)&&N(t.node))return t.node;let{ownerDocument:n,log:s,tasks:r,svgStyleElement:l,svgDefsElement:o,svgStyles:c,font:h,progress:a,autoDestruct:d,onCloneNode:u,onEmbedNode:m,onCreateForeignObjectSvg:g}=t;s.time("clone node");let f=await z(t.node,t,!0);if(l&&n){let y="";c.forEach((A,T)=>{y+=`${A.join(`,
`)} {
  ${T}
}
`}),l.appendChild(n.createTextNode(y))}s.timeEnd("clone node"),await u?.(f),h!==!1&&S(f)&&(s.time("embed web font"),await Ft(f,t),s.timeEnd("embed web font")),s.time("embed node"),He(f,t);let p=r.length,b=0,w=async()=>{for(;;){let y=r.pop();if(!y)break;try{await y}catch(A){t.log.warn("Failed to run task",A)}a?.(++b,p)}};a?.(b,p),await Promise.all([...Array.from({length:4})].map(w)),s.timeEnd("embed node"),await m?.(f);let E=Wt(f,t);return o&&E.insertBefore(o,E.children[0]),l&&E.insertBefore(l,E.children[0]),d&&_t(t),await g?.(E),E}function Wt(e,i){let{width:t,height:n}=i,s=tt(t,n,e.ownerDocument),r=s.ownerDocument.createElementNS(s.namespaceURI,"foreignObject");return r.setAttributeNS(null,"x","0%"),r.setAttributeNS(null,"y","0%"),r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.append(e),s.appendChild(r),s}async function Vt(e,i){let t=await q(e,i),n=await Gt(t),s=it(n,t.isEnable("removeControlCharacter"));t.autoDestruct||(t.svgStyleElement=Ee(t.ownerDocument),t.svgDefsElement=t.ownerDocument?.createElementNS($,"defs"),t.svgStyles.clear());let r=C(s,n.ownerDocument);return await ut(r,t)}async function Ce(e,i){let t=await q(e,i),{log:n,type:s,quality:r,dpi:l}=t,o=await Vt(t);n.time("canvas to blob");let c=await nt(o,s,r);if(["image/png","image/jpeg"].includes(s)&&l){let h=await ot(c.slice(0,33)),a=new Uint8Array(h);return s==="image/png"?a=Pe(a,l):s==="image/jpeg"&&(a=Me(a,l)),n.timeEnd("canvas to blob"),new Blob([a,c.slice(33)],{type:s})}return n.timeEnd("canvas to blob"),c}var M={METADATA:"data-replit-metadata",COMPONENT_NAME:"data-component-name"};function Le(e){if(e.startsWith("http://localhost:"))return!0;try{return new URL(e).hostname.endsWith(v.ALLOWED_DOMAIN)}catch{return!1}}function Y(e){if(!e)return null;let i=document.elementFromPoint(e.clientX,e.clientY);return i instanceof HTMLElement?i:null}function jt(e,i=300){if(!e)return"";let t=String(e);return t.length<=i?t:t.slice(0,i)+"..."}function X(e){if(e)return{tagName:e.tagName.toLowerCase(),className:e.className.toString?e.className.toString():String(e.className),textContent:e.textContent??"",id:e.id}}function B(e){let i=e.getAttribute(M.COMPONENT_NAME)??e.tagName.toLowerCase();return jt(i,50)}function K(e){let i=window.getComputedStyle(e),t=e.parentElement,n=e.nextElementSibling,s=t?.parentElement??null,r={backgroundColor:i.backgroundColor,color:i.color,display:i.display,position:i.position,width:i.width,height:i.height,fontSize:i.fontSize,fontFamily:i.fontFamily,fontWeight:i.fontWeight,margin:i.margin,padding:i.padding,textAlign:i.textAlign};return{elementPath:e.getAttribute(M.METADATA)??"",elementName:B(e),textContent:e.textContent??"",originalTextContent:e.getAttribute("data-original-text")?decodeURIComponent(e.getAttribute("data-original-text")??""):void 0,srcAttribute:e.getAttribute("src")??"",hasChildElements:e.childElementCount>0,id:e.id,className:e.className.toString?e.className.toString():String(e.className),computedStyles:r,textAlign:i.textAlign,relatedElements:{parent:X(t),nextSibling:X(n),grandParent:X(s)}}}async function xe(e){try{let t=window.getComputedStyle(e).backgroundColor;return qt(t)&&(t=window.getComputedStyle(document.documentElement).backgroundColor),await Ce(e,{type:"image/png",backgroundColor:t})}catch(i){console.error("[replit-cartographer] Failed to take screenshot:",i);return}}function qt(e){return e==="transparent"||e==="rgba(0, 0, 0, 0)"||e.endsWith(", 0)")||e.endsWith(",0)")}function J(e){let i=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth;return i.bottom>0&&i.top<t&&i.right>0&&i.left<n}function R(e,i=v.MAX_SIBLING_HIGHLIGHTERS,t=!1){let r=e.getAttribute(M.METADATA);if(!r)return[];let l=`[${M.METADATA}="${r}"]`,o=document,c=e.parentElement;c&&c.childElementCount>50&&(o=c);let h=o.querySelectorAll(l),a=Math.min(i,5e3),d=[],u=0;for(let m=0;m<h.length&&u<a;m++){let g=h[m];if(g instanceof HTMLElement&&g!==e){if(t&&!J(g))continue;d.push(g),u++}}return d}function _e(e,i,t){let n=e.children;for(let s=0;s<n.length;s++)if(t.value+=1,t.value>i||_e(n[s],i,t))return!0;return!1}function Ie(e){let i={value:0};return _e(e,v.MAX_DESCENDANTS_FOR_SCREENSHOT,i)}var D=class{selectedElement=null;selectedSiblingElements=[];visibleSelectedSiblingElements=[];isActive=!1;lastHighlightedElement=null;enableEditing=!1;shadowHost=null;shadowRoot=null;hoverHighlighter=null;hoverLabel=null;selectedHighlighter=null;selectedLabel=null;hoverSiblingHighlighters=[];selectedSiblingHighlighters=[];mutationObserver=null;throttledRecalculate=null;constructor(){this.setupMessageListener(),this.observeLightDarkModeSwitch(),this.notifyScriptLoaded(),this.throttledRecalculate=this.throttleRAF(this.recalculateSelectedElement.bind(this))}throttleRAF(i){let t=null,n=null;return(...s)=>{n=s,t===null&&(t=requestAnimationFrame(()=>{n!==null&&i(...n),t=null,n=null}))}}isPureTextElement(i){if(!i||!(i instanceof HTMLElement))return!1;let t=i.tagName.toLowerCase();if(t==="style"||t==="script"||t==="img"||i.childElementCount>0)return!1;let n=i.getAttribute("style");return n&&n.trim()!==""?!1:Array.from(i.childNodes).every(r=>r.nodeType===Node.TEXT_NODE)}initializeHighlighter(){this.shadowHost=document.createElement("div"),this.shadowHost.style.all="initial",this.shadowRoot=this.shadowHost.attachShadow({mode:"open"}),document.body.appendChild(this.shadowHost);let i=document.createElement("style");i.textContent=ee,this.shadowRoot.appendChild(i);let t=document.createElement("style");t.textContent=Z,document.head.appendChild(t),this.hoverHighlighter=document.createElement("div"),this.hoverLabel=document.createElement("div"),this.hoverHighlighter.className="beacon-highlighter beacon-hover-highlighter",this.hoverLabel.className="beacon-label beacon-hover-label",this.selectedHighlighter=document.createElement("div"),this.selectedLabel=document.createElement("div"),this.selectedHighlighter.className="beacon-highlighter beacon-selected-highlighter",this.selectedLabel.className="beacon-label beacon-selected-label",this.shadowRoot.appendChild(this.selectedHighlighter),this.shadowRoot.appendChild(this.selectedLabel),this.shadowRoot.appendChild(this.hoverHighlighter),this.shadowRoot.appendChild(this.hoverLabel)}setupMessageListener(){window.addEventListener("message",this.handleMessage.bind(this))}notifyScriptLoaded(){this.postMessageToParent({type:"SELECTOR_SCRIPT_LOADED",timestamp:Date.now(),version:P})}postMessageToParent(i){window.parent&&window.parent.postMessage(i,"*")}handleMouseMove=i=>{if(this.isActive&&this.hoverHighlighter){let t=Y(i);if(!t||t===this.hoverHighlighter||t===this.selectedHighlighter||t===this.shadowHost||this.selectedSiblingHighlighters.includes(t)||this.hoverSiblingHighlighters.includes(t)){this.hideHighlight(this.hoverHighlighter,this.hoverLabel),this.lastHighlightedElement=null,this.clearHoverSiblingHighlighters();return}if(t===this.selectedElement){this.hideHighlight(this.hoverHighlighter,this.hoverLabel),this.lastHighlightedElement=null,this.clearHoverSiblingHighlighters();return}this.lastHighlightedElement&&this.lastHighlightedElement!==t&&this.lastHighlightedElement!==this.selectedElement&&this.lastHighlightedElement.removeAttribute("contenteditable"),this.lastHighlightedElement=t,this.updateHighlighterPosition(t,this.hoverHighlighter,this.hoverLabel)}};handleMouseLeave=()=>{this.isActive&&(this.hoverHighlighter&&(this.hoverHighlighter.style.opacity="0"),this.hoverLabel&&(this.hoverLabel.style.opacity="0"),this.hoverSiblingHighlighters.length>0&&this.clearHoverSiblingHighlighters(),this.lastHighlightedElement&&this.lastHighlightedElement!==this.selectedElement&&this.lastHighlightedElement.removeAttribute("contenteditable"))};calculateLabelPosition(i,t){return t<28?{top:`${t}px`,left:`${i.left}px`,transform:"none",marginTop:"2px"}:{top:`${t}px`,left:`${i.left}px`,transform:"translateY(-100%)",marginTop:"-4px"}}updateHighlighterPosition(i,t,n){if(!t||!n)return;let s=R(i,v.MAX_SIBLING_HIGHLIGHTERS,!1);this.enableEditing&&s.length<=1&&i===this.selectedElement&&this.isPureTextElement(i)&&i.setAttribute("contenteditable","plaintext-only");let r=i.getBoundingClientRect(),l=window.innerHeight,o=Math.max(0,r.top),c=Math.min(l,r.bottom),h=Math.max(0,c-o);Object.assign(t.style,{opacity:h>0?"1":"0",top:`${o}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${h}px`}),n.textContent=B(i);let a=this.calculateLabelPosition(r,o);Object.assign(n.style,{...a,opacity:h>0?"1":"0"}),t===this.selectedHighlighter?this.highlightSelectedSiblings(i):this.highlightHoverSiblings(i)}hideHighlight(i,t){i&&(i.style.opacity="0"),t&&(t.style.opacity="0");let n=i===this.hoverHighlighter,s=i===this.selectedHighlighter;n&&this.clearHoverSiblingHighlighters(),s&&this.clearSelectedSiblingHighlighters()}handleClick=async i=>{if(!this.isActive)return;i.preventDefault(),i.stopPropagation();let t=Y(i);if((!t||t===this.hoverHighlighter||t===this.selectedHighlighter||t===this.shadowHost)&&(t=this.lastHighlightedElement),!t||t===this.selectedElement)return;this.unselectCurrentElement(),this.clearSelectedSiblingHighlighters(),this.selectedElement=t;let n=R(t),s=n.length>0;s&&this.highlightSelectedSiblings(t),t.hasAttribute("data-original-text")||t.setAttribute("data-original-text",encodeURIComponent(t.textContent??"")),!t.hasAttribute("data-original-style")&&t.hasAttribute("style")&&t.setAttribute("data-original-style",encodeURIComponent(t.getAttribute("style")??"")),!t.hasAttribute("data-original-src")&&t.hasAttribute("src")&&t.setAttribute("data-original-src",encodeURIComponent(t.getAttribute("src")??"")),!s&&this.enableEditing&&this.isPureTextElement(t)&&(this.selectedElement.setAttribute("contenteditable","plaintext-only"),this.selectedElement.focus()),this.selectedHighlighter&&this.selectedLabel&&(this.selectedHighlighter.style.outlineStyle="solid",this.selectedHighlighter.style.opacity="1",this.selectedHighlighter.style.pointerEvents="none",this.selectedLabel.style.opacity="1",this.selectedLabel.textContent=B(t)),this.hoverHighlighter&&(this.hoverHighlighter.style.opacity="0",this.hoverHighlighter.style.pointerEvents="none"),this.hoverLabel&&(this.hoverLabel.style.opacity="0"),this.clearHoverSiblingHighlighters(),this.updateHighlighterPosition(t,this.selectedHighlighter,this.selectedLabel);let r=K(t),l;if(!Ie(t))try{l=await xe(t)}catch(o){console.error("[replit-cartographer] Error capturing element screenshot:",o)}this.observeSelectedElement(),this.postMessageToParent({type:"ELEMENT_SELECTED",payload:{...r,screenshotBlob:l??void 0,siblingCount:s?n.length:0},timestamp:Date.now()})};restoreElements(){document.querySelectorAll('[data-replit-dirty="true"]').forEach(t=>{if(t.hasAttribute("data-original-text")){if(t.textContent!==decodeURIComponent(t.getAttribute("data-original-text")||"")){let n=decodeURIComponent(t.getAttribute("data-original-text")||"");t.textContent=n}t.removeAttribute("data-original-text")}if(t.hasAttribute("data-original-style")){let n=decodeURIComponent(t.getAttribute("data-original-style")||"");t.setAttribute("style",n),t.removeAttribute("data-original-style")}else t.removeAttribute("style");if(t.hasAttribute("data-original-src")&&t.getAttribute("src")!==decodeURIComponent(t.getAttribute("data-original-src")||"")){let n=decodeURIComponent(t.getAttribute("data-original-src")||"");t.setAttribute("src",n),t.removeAttribute("data-original-src")}t.removeAttribute("data-replit-dirty")})}unselectCurrentElement(){if(this.restoreElements(),this.selectedElement){if(this.selectedElement.removeAttribute("contenteditable"),this.selectedElement.hasAttribute("data-original-style")){let i=decodeURIComponent(this.selectedElement.getAttribute("data-original-style")||"");this.selectedElement.setAttribute("style",i),this.selectedElement.removeAttribute("data-original-style")}if(this.selectedElement.hasAttribute("data-original-src")&&this.selectedElement.getAttribute("src")!==decodeURIComponent(this.selectedElement.getAttribute("data-original-src")||"")){let i=decodeURIComponent(this.selectedElement.getAttribute("data-original-src")||"");this.selectedElement.setAttribute("src",i),this.selectedElement.removeAttribute("data-original-src")}this.selectedElement=null}this.clearSelectedSiblingHighlighters(),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}handleMessage=i=>{if(!Le(i.origin))return;let t=i.data;if(!(!t||typeof t!="object"))switch(t.type){case"TOGGLE_REPLIT_VISUAL_EDITOR":{this.handleVisualEditorToggle(t);break}case"CLEAR_SELECTION":{this.unselectCurrentElement(),this.hideHighlight(this.selectedHighlighter,this.selectedLabel);break}case"UPDATE_SELECTED_ELEMENT":{if(!this.selectedElement)return;let{attributes:n}=t;[this.selectedElement,...this.selectedSiblingElements].forEach(r=>{n.style!==void 0&&(r.setAttribute("style",n.style),r.setAttribute("data-replit-dirty","true")),n.textContent!==void 0&&(r.textContent=n.textContent,r.setAttribute("data-replit-dirty","true")),n.className!==void 0&&(r.className=n.className,r.setAttribute("data-replit-dirty","true")),n.src!==void 0&&(r.setAttribute("src",n.src),r.setAttribute("data-replit-dirty","true"))}),this.updateHighlighterPosition(this.selectedElement,this.selectedHighlighter,this.selectedLabel),this.selectedSiblingElements.length>0&&(this.clearHighlighters(this.selectedSiblingHighlighters),this.selectedSiblingHighlighters=[],this.selectedSiblingHighlighters=this.highlightElements(this.selectedSiblingElements));break}case"CLEAR_ELEMENT_DIRTY":{this.selectedElement&&this.selectedElement.removeAttribute("data-replit-dirty");break}case"APPLY_THEME_PREVIEW":{this.handleApplyThemePreview(t);break}case"CLEAR_THEME_PREVIEW":{this.handleClearThemePreview();break}}};handleApplyThemePreview(i){if(i.type!=="APPLY_THEME_PREVIEW")return;let t=document.getElementById(v.THEME_PREVIEW_STYLE_ID);t||(t=document.createElement("style"),t.id=v.THEME_PREVIEW_STYLE_ID,document.head.appendChild(t)),t.textContent=i.themeContent}handleClearThemePreview(){let i=document.getElementById(v.THEME_PREVIEW_STYLE_ID);i&&i.remove()}handleVisualEditorToggle(i){if(i.type!=="TOGGLE_REPLIT_VISUAL_EDITOR")return;let t=!!i.enabled;this.enableEditing=!!i.enableEditing,t?this.postMessageToParent({type:"REPLIT_VISUAL_EDITOR_ENABLED",timestamp:Date.now()}):this.postMessageToParent({type:"REPLIT_VISUAL_EDITOR_DISABLED",timestamp:Date.now()}),this.isActive!==t&&(this.isActive=t,this.toggleEventListeners(t))}observeSelectedElement(){if(this.selectedElement){if(!this.isPureTextElement(this.selectedElement)){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null);return}this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(i=>{if(i.some(n=>n.type==="characterData")&&this.selectedElement){this.selectedElement.setAttribute("data-replit-dirty","true");let n=K(this.selectedElement);this.postMessageToParent({type:"ELEMENT_TEXT_CHANGED",payload:n,timestamp:Date.now()}),this.updateHighlighterPosition(this.selectedElement,this.selectedHighlighter,this.selectedLabel)}}),this.mutationObserver.observe(this.selectedElement,{characterData:!0,childList:!1,attributes:!1,subtree:!0})}}observeLightDarkModeSwitch(){let i=new MutationObserver(n=>{n.forEach(s=>{s.type==="attributes"&&s.attributeName==="class"&&(s.target.classList.contains("dark")?this.postMessageToParent({type:"DARK_MODE_USED",timestamp:Date.now()}):this.postMessageToParent({type:"LIGHT_MODE_USED",timestamp:Date.now()}))})}),t=document.documentElement;i.observe(t,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1})}recalculateSelectedElement=()=>{this.isActive&&(this.selectedElement&&this.updateHighlighterPosition(this.selectedElement,this.selectedHighlighter,this.selectedLabel),this.lastHighlightedElement&&this.updateHighlighterPosition(this.lastHighlightedElement,this.hoverHighlighter,this.hoverLabel),this.selectedSiblingElements.length>0&&this.updateSiblingHighlighterPositions())};updateSiblingHighlighterPositions(){for(let i=0;i<this.selectedSiblingHighlighters.length;i++){let t=this.selectedSiblingHighlighters[i],n=this.visibleSelectedSiblingElements[i];if(!t||!n)continue;let s=n.getBoundingClientRect(),r=window.innerHeight,l=Math.max(0,s.top),o=Math.min(r,s.bottom),c=Math.max(0,o-l);Object.assign(t.style,{opacity:c>0?"1":"0",top:`${l}px`,left:`${s.left}px`,width:`${s.width}px`,height:`${c}px`})}}handleKeyDown=i=>{this.isActive&&(i.key==="Escape"||i.key==="Esc")&&this.handleVisualEditorToggle({type:"TOGGLE_REPLIT_VISUAL_EDITOR",enabled:!1,timestamp:Date.now()})};toggleEventListeners(i){i?(this.initializeHighlighter(),this.enableDisabledElements(),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseleave",this.handleMouseLeave),document.addEventListener("click",this.handleClick,!0),document.addEventListener("keydown",this.handleKeyDown),this.throttledRecalculate&&(window.addEventListener("resize",this.throttledRecalculate),window.addEventListener("scroll",this.throttledRecalculate,!0))):(this.restoreDisabledElements(),this.restoreElements(),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("click",this.handleClick,!0),document.removeEventListener("mouseleave",this.handleMouseLeave),document.removeEventListener("keydown",this.handleKeyDown),this.throttledRecalculate&&(window.removeEventListener("resize",this.throttledRecalculate),window.removeEventListener("scroll",this.throttledRecalculate,!0)),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.selectedElement&&(this.selectedElement.removeAttribute("contenteditable"),this.selectedElement.removeAttribute("data-original-text"),document.querySelectorAll('[contenteditable="plaintext-only"]').forEach(t=>{t.removeAttribute("contenteditable")})),this.clearSelectedSiblingHighlighters(),this.clearHoverSiblingHighlighters(),this.hoverHighlighter?.remove(),this.hoverLabel?.remove(),this.selectedHighlighter?.remove(),this.selectedLabel?.remove(),this.shadowHost?.remove(),this.hoverHighlighter=null,this.hoverLabel=null,this.selectedHighlighter=null,this.selectedLabel=null,this.shadowHost=null,this.shadowRoot=null,this.selectedElement=null)}clearHighlighters(i){return i.forEach(t=>{t.remove()}),[]}clearHoverSiblingHighlighters(){this.hoverSiblingHighlighters=this.clearHighlighters(this.hoverSiblingHighlighters)}clearSelectedSiblingHighlighters(){this.selectedSiblingElements.forEach(i=>{i.removeAttribute("contenteditable")}),this.selectedSiblingElements=[],this.visibleSelectedSiblingElements=[],this.selectedSiblingHighlighters=this.clearHighlighters(this.selectedSiblingHighlighters)}highlightElements(i){if(!this.shadowRoot||i.length===0)return[];let t=[];return i.forEach(n=>{let s=document.createElement("div");s.className="beacon-highlighter beacon-sibling-highlighter",this.shadowRoot?.appendChild(s),t.push(s);let r=n.getBoundingClientRect(),l=window.innerHeight,o=Math.max(0,r.top),c=Math.min(l,r.bottom),h=Math.max(0,c-o);Object.assign(s.style,{opacity:h>0?"1":"0",top:`${o}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${h}px`})}),t}highlightHoverSiblings(i){this.clearHoverSiblingHighlighters();let t=R(i,v.MAX_SIBLING_HIGHLIGHTERS,!0);this.hoverSiblingHighlighters=this.highlightElements(t)}highlightSelectedSiblings(i){this.clearSelectedSiblingHighlighters();let t=R(i),n=t.filter(s=>J(s));this.selectedSiblingElements=t,this.visibleSelectedSiblingElements=n,this.selectedSiblingHighlighters=this.highlightElements(n)}enableDisabledElements(){document.querySelectorAll("button[disabled], input[disabled]").forEach(i=>{i.removeAttribute("disabled"),i.setAttribute("data-replit-disabled","")})}restoreDisabledElements(){document.querySelectorAll("[data-replit-disabled]").forEach(i=>{i.removeAttribute("data-replit-disabled"),i.setAttribute("disabled","")})}};if(typeof window<"u")try{window.REPLIT_BEACON_VERSION||(window.REPLIT_BEACON_VERSION=P,new D)}catch(e){console.error("[replit-beacon] Failed to initialize:",e)}})();
</script>
  <script type="text/javascript" src="/@replit/vite-plugin-dev-banner/banner-script.js" id="replit-dev-banner"></script>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner-large"></div>
        <div class="loading-text" id="loadingText">Loading...</div>
    </div>

    <div class="balance-overlay" id="balanceOverlay"></div>

    <div class="app-container">
        <header class="header">
            <div class="header-left">
                <button class="menu-btn" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <img src="company-logo.png" alt="Logo" id="headerLogo">
                    <span class="logo-text">
                        <span style="color: #f4a020; text-shadow: 0 0 8px rgba(244,160,32,0.5);"></span>esaHub <span style="color: #f4a020; letter-spacing: 2px;">Kenya</span>
                    </span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-balance">
                    <span id="headerBalanceLabel">KES</span>
                    <span class="balance-amount" id="headerBalance"><i class="fas fa-lock" style="font-size: 1.2rem;"></i></span>
                    <button class="refresh-btn" onclick="refreshBalance()" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <button class="notification-btn" onclick="toggleNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notifBadge">0</span>
                </button>
            </div>
        </header>

        <div class="sidebar-overlay" onclick="closeSidebar()"></div>
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-user">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <h3 id="sidebarEmail">Guest</h3>
                        <p id="sidebarBalance"><i class="fas fa-lock" style="font-size: 0.7rem; margin-right: 5px;"></i>Login to view</p>
                    </div>
                </div>
            </div>
            <div class="sidebar-menu">
                <button class="menu-item" onclick="showPage('welcome')">
                    <i class="fas fa-door-open"></i> <span class="menu-text">Home</span>
                </button>
                <button class="menu-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-home"></i> <span class="menu-text">Dashboard</span>
                </button>
                
                <button class="menu-item loan-feature" onclick="openLoanTerms()" style="background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1));">
                    <i class="fas fa-hand-holding-usd" style="color: #27ae60;"></i> <span class="menu-text">Get A Loan Today</span>
                </button>
                <button class="menu-item" onclick="showPage('settings')">
                    <i class="fas fa-cog"></i> <span class="menu-text">Loan Settings</span>
                </button>
                <button class="menu-item" onclick="showPage('about')">
                    <i class="fas fa-info-circle"></i> <span class="menu-text">About Us</span>
                </button>
                <button class="menu-item" onclick="showPage('contact')">
                    <i class="fas fa-envelope"></i> <span class="menu-text">Contact Us</span>
                </button>
                <button class="menu-item" onclick="showPage('privacy')">
                    <i class="fas fa-shield-alt"></i> <span class="menu-text">Loan Privacy Policy</span>
                </button>
                <button class="menu-item" onclick="showPage('terms')">
                    <i class="fas fa-file-contract"></i> <span class="menu-text">Loan Terms of Service</span>
                </button>
                <button class="menu-item" onclick="showPage('cookies')">
                    <i class="fas fa-cookie-bite"></i> <span class="menu-text">Cookie Policy</span>
                </button>
                <div class="menu-divider"></div>
                <button class="menu-item" onclick="showPage('admin')">
                    <i class="fas fa-user-shield"></i> <span class="menu-text">Staff Dashboard</span>
                </button>
                <button class="menu-item" onclick="logout()" style="color: var(--danger);">
                    <i class="fas fa-sign-out-alt"></i> <span class="menu-text">Logout</span>
                </button>
            </div>
        </nav>

        <main class="main-content">
            <!-- Welcome Page -->
            <div id="page-welcome" class="page welcome-page active">
                <div class="welcome-hero" style="background: linear-gradient(135deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.4) 50%, rgba(0, 0, 0, 0.5) 100%), url('welcome.png') center center / cover no-repeat; border-radius: 16px; padding: 40px 20px; text-align: center; color: white; box-shadow: 0 12px 30px rgba(0,0,0,0.3); background-attachment: fixed;">
                    <p class="welcome-tagline" style="color: #f4a020; font-size: 0.95rem; letter-spacing: 1px; text-transform: uppercase; font-weight: 600; margin-bottom: 15px;">Welcome Back</p>
                    <h1 style="font-size: 2.2rem; font-weight: 800; margin-bottom: 15px; color: #fff;">PesaHub Kenya</h1>
                    <p style="font-size: 1.05rem; margin-bottom: 25px; opacity: 0.95; line-height: 1.6;">Your complete financial hub for airtime, instant loans, and mobile money solutions. All in one secure platform.</p>
                    <div class="welcome-highlights" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px;">
                        <span class="welcome-highlight-item" style="background: rgba(244, 160, 32, 0.2); padding: 12px; border-radius: 12px; border: 1px solid rgba(244, 160, 32, 0.4); color: #f4a020;"><i class="fas fa-bolt" style="margin-right: 8px;"></i> Fast</span>
                        <span class="welcome-highlight-item" style="background: rgba(46, 204, 113, 0.2); padding: 12px; border-radius: 12px; border: 1px solid rgba(46, 204, 113, 0.4); color: #2ecc71;"><i class="fas fa-hand-holding-usd" style="margin-right: 8px;"></i> Loans</span>
                        <span class="welcome-highlight-item" style="background: rgba(52, 152, 219, 0.2); padding: 12px; border-radius: 12px; border: 1px solid rgba(52, 152, 219, 0.4); color: #3498db;"><i class="fas fa-shield-alt" style="margin-right: 8px;"></i> Secure</span>
                    </div>
                    <p style="margin-bottom: 20px; opacity: 0.9; font-size: 0.95rem;"><i class="fas fa-users" style="margin-right: 8px;"></i>Join 50,000+ Kenyans using PesaHub Kenya</p>
                    <button class="welcome-get-started-btn" onclick="goToDashboard()" style="background: linear-gradient(135deg, #f4a020, #e67e22); border: none; padding: 15px 40px; font-size: 1.1rem; font-weight: 700; border-radius: 12px; color: white; cursor: pointer; box-shadow: 0 6px 20px rgba(244, 160, 32, 0.3); transition: all 0.3s;">Get Started <i class="fas fa-arrow-right" style="margin-left: 10px;"></i></button>
                </div>

                <div class="welcome-features">
                    <h3 style="text-align: center; color: var(--primary); margin-bottom: 25px; font-size: 1.3rem;">Services offered</h3>
                    

                    <div class="welcome-feature-card">
                        <div class="welcome-feature-icon" style="background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.2));">
                            <i class="fas fa-hand-holding-usd" style="color: #27ae60;"></i>
                        </div>
                        <div>
                            <h4 style="margin-bottom: 5px; color: var(--dark);">Instant Loans</h4>
                            <p style="color: var(--gray); font-size: 0.9rem; line-height: 1.5;">Get loans up to KES 15,000 with low interest rates. Quick approval and flexible repayment options.</p>
                        </div>
                    </div>


                </div>

                    <div class="welcome-quick-links">
                        <div class="welcome-quick-link" onclick="navigateWithAuth('loan-dashboard')">
                            <i class="fas fa-hand-holding-usd" style="color: #27ae60;"></i>
                            <span style="font-weight: 600; color: var(--dark);">Get Loans</span>
                        </div>
                    </div>

                <div class="welcome-cta">
                    <button class="welcome-cta-btn" onclick="goToDashboard()">
                        <i class="fas fa-arrow-right" style="margin-right: 10px;"></i> Enter Dashboard
                    </button>
                </div>
            </div>

            <div id="page-dashboard" class="page">
                <div class="hero-section" style="padding-top: 0;">
                    <!-- Loan Limit Card -->
                    <div class="card loan-status-card" style="background: linear-gradient(145deg, #1a5f2a 0%, #0d4a1f 50%, #083314 100%); border: none; border-radius: 18px; padding: 22px; position: relative; overflow: hidden; box-shadow: 0 12px 30px rgba(0,0,0,0.3); margin-top: 0;">
                        <div class="loan-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start; position: relative; z-index: 1;">
                            <div>
                                <p style="font-size: 0.85rem; color: rgba(255,255,255,0.75); margin: 0 0 8px 0; text-transform: uppercase; letter-spacing: 1px; font-weight: 500;">Current Loan Limit</p>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <p class="loan-limit-value" id="dashboardLoanLimit" style="font-size: 1.6rem; font-weight: 700; color: #f4a020; margin: 0;">KES 15,000.00</p>
                                </div>
                            </div>
                            <div style="background: rgba(46, 204, 113, 0.2); backdrop-filter: blur(10px); border-radius: 12px; padding: 12px 16px; border: 1px solid rgba(46, 204, 113, 0.4); text-align: center;">
                                <p style="margin: 0; font-size: 0.75rem; color: rgba(255,255,255,0.6); text-transform: uppercase; letter-spacing: 0.5px;">Interest Rate</p>
                                <p style="margin: 4px 0 0 0; font-size: 1.1rem; font-weight: 700; color: #2ecc71;"><i class="fas fa-percent" style="margin-right: 6px;"></i>From 1.5%</p>
                            </div>
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(244, 160, 32, 0.2); position: relative; z-index: 1;">
                            <p style="margin: 0; font-size: 0.8rem; color: rgba(255,255,255,0.8);"><strong></strong> Apply for a loan today and get instant approval within minutes!</p>
                        </div>
                    </div>

                    <div class="quick-actions-grid" style="gap: 12px; margin-top: 22px; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));">
                        <button class="action-btn loan-feature" onclick="openLoanTerms()" style="background: linear-gradient(135deg, rgba(30, 130, 75, 1), rgba(20, 100, 55, 1)); padding: 16px 18px; border-radius: 14px; border: none; flex-direction: row; justify-content: center; color: white; box-shadow: 0 6px 20px rgba(30, 130, 75, 0.3);">
                            <i class="fas fa-hand-holding-usd" style="font-size: 1.3rem; margin-right: 10px; color: white;"></i>
                            <span style="font-weight: 700; color: yellow; font-size: 0.95rem;">Check My Loan Eligibility</span>
                        </button>
                    </div>

                </div>

                <div class="page-content">
                <button class="pwa-install" id="pwaInstall" onclick="installPWA()" title="Install App">
                    <p>Install the app to access More Loan services</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play" style="height: 40px; width: auto;">
                </button>


                <!-- Scrolling Announcement -->
                <div class="scrolling-text-container" style="margin-top: 15px;">
                    <div class="scrolling-text">
                         LOANS NOW AVAILABLE: Get up to KES 15,000 instantly! Quick approval in minutes!  Low interest rates from 1.5%! Flexible repayment up to 100 days! Fast, secure, and reliable service! Apply for a loan today! 
                    </div>
                </div>


                <!-- Loan Feature Content (Izwe Style) -->
                <div class="loan-hero" style="margin-top: 30px; margin-bottom: 40px; text-align: center;">
                    <div style="background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80'); background-size: cover; background-position: center; border-radius: 16px; padding: 60px 20px; color: white;">
                        <h2 style="font-size: 2.2rem; font-weight: 800; margin-bottom: 15px;">Personal Loans</h2>
                        <p style="font-size: 1.1rem; max-width: 600px; margin: 0 auto 25px; line-height: 1.5;">Providing fast and accessible personal finance solutions.</p>
                        <div class="contact-tab" style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); background: #007bff; color: white; padding: 15px 10px; border-radius: 8px 0 0 8px; writing-mode: vertical-lr; font-weight: 600; cursor: pointer; box-shadow: -2px 2px 10px rgba(0,0,0,0.2);">
                            Contact us
                        </div>
                    </div>
                </div>

                <div class="loan-philosophy" style="text-align: center; margin-bottom: 50px; padding: 0 20px;">
                    <h2 style="font-size: 2rem; color: #212529; font-weight: 800; margin-bottom: 20px;">A Personal Loan is Not Just Money.</h2>
                    <p style="font-size: 1.1rem; color: #495057; margin-bottom: 25px; max-width: 700px; margin-left: auto; margin-right: auto; line-height: 1.6;">It provides an opportunity to create a brighter future for you and your family.</p>
                    <p style="color: #6c757d; max-width: 700px; margin: 0 auto; line-height: 1.6;">We provide rapid approval, quick payments, and simple access to personal loans designed just for you to support your family and personal development goals.</p>
                </div>

                <div class="loan-features-icons" style="display: flex; justify-content: center; gap: 40px; margin-bottom: 50px; flex-wrap: wrap;">
                    <div style="text-align: center; max-width: 250px;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center;">
                             <i class="fas fa-stopwatch" style="font-size: 3.5rem; color: #212529;"></i>
                        </div>
                        <p style="font-size: 0.95rem; color: #212529; font-weight: 500;">Get timely access to dependable financial support. Fast application processing and payouts of up to Ksh 15,000</p>
                    </div>
                    
                    <div style="text-align: center; max-width: 250px;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center;">
                             <i class="fas fa-money-bill-wave" style="font-size: 3.5rem; color: #212529;"></i>
                        </div>
                        <p style="font-size: 0.95rem; color: #212529; font-weight: 500;">Easy personal loans from a reliable financial partner. Flexible payback terms of up to 120 days, easy monthly repayments and fixed interest rates.</p>
                    </div>

                    <div style="text-align: center; max-width: 250px;">
                         <div style="width: 80px; height: 80px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center;">
                             <i class="fas fa-calendar-check" style="font-size: 3.5rem; color: #212529;"></i>
                        </div>
                        <p style="font-size: 0.95rem; color: #212529; font-weight: 500;">Connect with us, your way. Choose how to transact, whether in-app, via an agent who will come to you, or through our Call Centre.</p>
                    </div>
                </div>

                <div class="who-qualifies" style="background: #007bff; color: white; padding: 40px 20px; text-align: center; border-radius: 16px; margin-bottom: 40px;">
                    <h2 style="font-size: 2.2rem; font-weight: 800; margin-bottom: 25px;">Who qualifies?</h2>
                    <p style="font-size: 1.1rem; max-width: 700px; margin: 0 auto 30px; line-height: 1.6;">We offer personalized service to all Kenyan government employees, TSC Members across all 47 counties within Kenya, as well as selected parastatals and private institutions.</p>
                    <button onclick="openLoanTerms()" style="background: #212529; color: white; border: none; padding: 15px 30px; font-size: 1rem; font-weight: 600; cursor: pointer; border-radius: 4px; transition: background 0.3s;">Apply for a Personal Loan</button>
                </div>

                <div class="integrity-section" style="background: #212529; color: white; padding: 40px 20px; text-align: center; border-radius: 16px;">
                    <p style="font-size: 0.95rem; max-width: 800px; margin: 0 auto 25px; line-height: 1.6; opacity: 0.9;">Izwe is committed to the highest standards of business integrity, ethical values, and governance. We encourage our customers to give feedback, report any complaints or fraudulent activities. NOTE - Izwe will never grant loan funds you did not apply for. If you are contacted with this sort of payment arrangement, report fraud here.</p>
                    <button onclick="showPage('contact')" style="background: #007bff; color: white; border: none; padding: 15px 30px; font-size: 1rem; font-weight: 600; cursor: pointer; border-radius: 4px; width: 100%; max-width: 300px; transition: background 0.3s;">Report Complaint or Fraud</button>
                </div>
                            <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Instant Delivery</h4>
                            <p style="font-size: 0.8rem; color: var(--gray);">Airtime delivered in seconds</p>
                        </div>
                        <div style="text-align: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-shield-alt" style="font-size: 2rem; color: var(--success); margin-bottom: 10px;"></i>
                            <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Secure Payments</h4>
                            <p style="font-size: 0.8rem; color: var(--gray);">M-Pesa powered security</p>
                        </div>
                        <div style="text-align: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-percentage" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;"></i>
                            <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Best Rates</h4>
                            <p style="font-size: 0.8rem; color: var(--gray);">Competitive discounts</p>
                        </div>
                        <div style="text-align: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-headset" style="font-size: 2rem; color: var(--info); margin-bottom: 10px;"></i>
                            <h4 style="font-size: 0.9rem; margin-bottom: 5px;">24/7 Support</h4>
                            <p style="font-size: 0.8rem; color: var(--gray);">Always here to help</p>
                        </div>
                    </div>
                </div>

                <!-- Platform Usage Graph -->
                <div class="users-graph-card" style="margin-top: 20px;">
                    <h3 class="card-title"><i class="fas fa-chart-bar"></i> Platform Activity</h3>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 15px;">Users buying airtime this week</p>
                    <div class="graph-container" style="margin-bottom: 30px;">
                        <div class="graph-bar" style="height: 65%;" data-value="1.2K"><span>Mon</span></div>
                        <div class="graph-bar" style="height: 80%;" data-value="1.8K"><span>Tue</span></div>
                        <div class="graph-bar" style="height: 55%;" data-value="950"><span>Wed</span></div>
                        <div class="graph-bar" style="height: 90%;" data-value="2.1K"><span>Thu</span></div>
                        <div class="graph-bar" style="height: 75%;" data-value="1.5K"><span>Fri</span></div>
                        <div class="graph-bar" style="height: 60%;" data-value="1.1K"><span>Sat</span></div>
                        <div class="graph-bar" style="height: 85%;" data-value="1.9K"><span>Sun</span></div>
                    </div>
                    <div style="display: flex; justify-content: space-around; text-align: center; padding-top: 10px; border-top: 1px solid var(--border);">
                        <div>
                            <p style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">10.5K</p>
                            <p style="font-size: 0.75rem; color: var(--gray);">Weekly Users</p>
                        </div>
                        <div>
                            <p style="font-size: 1.5rem; font-weight: 700; color: var(--success);">KES 100k+</p>
                            <p style="font-size: 0.75rem; color: var(--gray);">Airtime Sold</p>
                        </div>
                        <div>
                            <p style="font-size: 1.5rem; font-weight: 700; color: var(--secondary);">99.8%</p>
                            <p style="font-size: 0.75rem; color: var(--gray);">Success Rate</p>
                        </div>
                    </div>
                </div>

                <!-- FAQ Section -->
                <div class="card" style="margin-top: 20px;">
                    <h3 class="card-title"><i class="fas fa-question-circle"></i> <span data-translate="faq">Frequently Asked Questions</span></h3>
                    <div class="faq-item" style="margin-bottom: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                        <h4 style="font-size: 0.95rem; color: var(--primary); margin-bottom: 8px;"><i class="fas fa-chevron-right" style="margin-right: 8px;"></i>How do I buy airtime?</h4>
                        <p style="font-size: 0.85rem; color: var(--gray);">Simply deposit funds to your wallet, select a network, enter the phone number and amount, then click "Buy Now".</p>
                    </div>
                    <div class="faq-item" style="margin-bottom: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                        <h4 style="font-size: 0.95rem; color: var(--primary); margin-bottom: 8px;"><i class="fas fa-chevron-right" style="margin-right: 8px;"></i>How long does airtime delivery take?</h4>
                        <p style="font-size: 0.85rem; color: var(--gray);">Airtime is delivered instantly within 5-30 seconds after successful payment.</p>
                    </div>
                    <div class="faq-item" style="margin-bottom: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                        <h4 style="font-size: 0.95rem; color: var(--primary); margin-bottom: 8px;"><i class="fas fa-chevron-right" style="margin-right: 8px;"></i>What is the minimum deposit?</h4>
                        <p style="font-size: 0.85rem; color: var(--gray);">The minimum deposit is KES 10. Deposits of KES 50 or more receive a KES 6 bonus!</p>
                    </div>
                    <div class="faq-item" style="padding: 15px; background: var(--light); border-radius: 12px;">
                        <h4 style="font-size: 0.95rem; color: var(--primary); margin-bottom: 8px;"><i class="fas fa-chevron-right" style="margin-right: 8px;"></i>Which networks are supported?</h4>
                        <p style="font-size: 0.85rem; color: var(--gray);">We support Safaricom, Airtel, and Telkom Kenya networks.</p>
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3 class="card-title"><i class="fas fa-clock"></i> <span data-translate="recentTransactions">Recent Savings Transactions</span></h3>
                    <div class="transaction-list" id="recentTransactions">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <h3>No transactions yet</h3>
                            <p>Your recent transactions will appear here</p>
                        </div>
                    </div>
                </div>

                <div class="footer-links">
                    <span class="footer-link" onclick="showPage('about')">About</span>
                    <span class="footer-link" onclick="showPage('contact')">Contact</span>
                    <span class="footer-link" onclick="showPage('privacy')">Privacy</span>
                    <span class="footer-link" onclick="showPage('terms')">Terms</span>
                </div>
                </div>
            </div>

            <div id="page-deposit" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-wallet"></i> Deposit Money</h3>

                    <div class="info-box">
                        <p><i class="fas fa-gift"></i> Deposit KES 50+ and get <strong>+6 bonus</strong> added to your account!</p>
                    </div>

                    <form id="depositForm">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Phone Number *</label>
                            <input type="tel" class="form-input" id="depositPhone" placeholder="e.g. 0732202740" maxlength="10" required>
                            <small style="color: var(--gray); font-size: 0.8rem;">Enter your M-Pesa number (starts with 07 or 01)</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-money-bill"></i> Amount (KES) *</label>
                            <input type="number" class="form-input" id="depositAmount" placeholder="Minimum: 10" min="10" required>
                        </div>

                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary" id="depositStkBtn">
                                <i class="fas fa-mobile-alt"></i> Deposit via M-Pesa STK Push
                            </button>

                            <div class="divider-text"><span>OR</span></div>

                            <button type="button" class="btn btn-link" onclick="depositWithLink()">
                                <i class="fas fa-link"></i> Deposit with Payment Link
                            </button>
                        </div>

                        <button type="button" class="retry-btn" id="retryDepositBtn" onclick="retryDeposit()">
                            <i class="fas fa-sync-alt"></i> Retry Deposit
                        </button>

                        <div id="depositStatus" style="margin-top: 15px; text-align: center; display: none;">
                            <span class="live-indicator"></span>
                            <span id="depositStatusText">Processing...</span>
                        </div>
                    </form>
                </div>
            </div>

            <div id="page-buy-airtime" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-mobile-alt"></i> Buy Airtime</h3>

                    <div class="info-box">
                        <p><i class="fas fa-info-circle"></i> Buy KES 20 and above and receive extra Commissions  directly to your account Float balance. Minimum purchase: KES 10</p>
                    </div>

                    <form id="buyAirtimeForm">
                        <!-- Network Selection -->
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-signal"></i> Select Network * </label>
                            <div class="network-selector">
                                <div class="network-option" data-network="safaricom" onclick="selectNetwork('safaricom')">
                                    <img src="safaricom.png" alt="Safaricom" onerror="this.src='https://via.placeholder.com/50x50/4CB05B/ffffff?text=SAF'">
                                    <span>Safaricom</span>
                                </div>
                                <div class="network-option" data-network="airtel" onclick="selectNetwork('airtel')">
                                    <img src="airtel.png" alt="Airtel" onerror="this.src='https://via.placeholder.com/50x50/ED1C24/ffffff?text=AIR'">
                                    <span>Airtel</span>
                                </div>
                                <div class="network-option" data-network="telcom" onclick="selectNetwork('telcom')">
                                    <img src="telcom.png" alt="Telcom" onerror="this.src='https://via.placeholder.com/50x50/0066B3/ffffff?text=TEL'">
                                    <span>Telcom</span>
                                </div>
                            </div>
                            <p class="network-error" id="networkError">Please select a network to continue</p>
                            <input type="hidden" id="selectedNetwork" value="">
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Phone Number *</label>
                            <div class="phone-wrapper">
                                <span class="phone-prefix">+254</span>
                                <input type="tel" class="form-input" id="airtimePhone" placeholder="7XXXXXXXX" maxlength="9" required oninput="validateAirtimePhone()">
                            </div>
                            <p class="validation-error" id="phoneError">Enter a valid 9-digit phone number starting with 7 or 1</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-money-bill"></i> Amount (KES) *</label>
                            <input type="number" class="form-input" id="airtimeAmount" placeholder="Minimum: 10" min="10" required oninput="validateAirtimeAmount()">
                            <p class="validation-error" id="amountError">Minimum amount is KES 10</p>
                        </div>

                        <div class="btn-group" style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button type="submit" class="btn btn-primary" id="buyAirtimeBtn" disabled style="flex: 1;">
                                <i class="fas fa-shopping-cart"></i> Buy Now (From Balance)
                            </button>

                            <button type="button" class="btn btn-outline" onclick="goToDirectBuyFromBuyPage()" style="flex: 1; border-color: var(--secondary); color: var(--secondary);">
                                <i class="fas fa-bolt"></i> Buy With mpesa stk push
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="page-sell-airtime" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-gift"></i> Sell Airtime Get Extra Commission</h3>

                    <div class="info-box">
                        <p><i class="fas fa-info-circle"></i> Sell airtime and earn commission! KES 10-49 = 5% commission, KES 50+ = 10% commission. Minimum Sell: KES 10</p>
                    </div>

                    <form id="sellAirtimeForm">
                        <!-- Network Selection -->
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-signal"></i> Select Network * </label>
                            <div class="network-selector">
                                <div class="network-option" data-network="safaricom" data-form="send" onclick="selectSendNetwork('safaricom')">
                                    <img src="safaricom.png" alt="Safaricom" onerror="this.src='https://via.placeholder.com/50x50/4CB05B/ffffff?text=SAF'">
                                    <span>Safaricom</span>
                                </div>
                                <div class="network-option" data-network="airtel" data-form="send" onclick="selectSendNetwork('airtel')">
                                    <img src="airtel.png" alt="Airtel" onerror="this.src='https://via.placeholder.com/50x50/ED1C24/ffffff?text=AIR'">
                                    <span>Airtel</span>
                                </div>
                                <div class="network-option" data-network="telcom" data-form="send" onclick="selectSendNetwork('telcom')">
                                    <img src="telcom.png" alt="Telcom" onerror="this.src='https://via.placeholder.com/50x50/0066B3/ffffff?text=TEL'">
                                    <span>Telcom</span>
                                </div>
                            </div>
                            <p class="network-error" id="sendNetworkError">Please select a network to continue</p>
                            <input type="hidden" id="selectedSendNetwork" value="">
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Phone Number to Sell Airtime *</label>
                            <div class="phone-wrapper">
                                <span class="phone-prefix">+254</span>
                                <input type="tel" class="form-input" id="sellAirtimePhone" placeholder="7XXXXXXXX" maxlength="9" required oninput="validateSendPhone()">
                            </div>
                            <p class="validation-error" id="sendPhoneError">Enter a valid 9-digit phone number starting with 7 or 1</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-money-bill"></i> Airtime Amount (KES) *</label>
                            <input type="number" class="form-input" id="sellAirtimeAmount" placeholder="Minimum: 10" min="10" required oninput="validateSendAmount()">
                            <p class="validation-error" id="sendAmountError">Minimum amount is KES 10</p>
                        </div>

                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary" id="sellAirtimeBalanceBtn" disabled>
                                <i class="fas fa-wallet"></i> Sell from Balance
                            </button>
                        </div>
                    </form>
                </div>

                <div class="card" style="margin-top: 15px;">
                    <h3 class="card-title"><i class="fas fa-chart-line"></i> Service Status</h3>
                    <div id="statumFloatStatus">
                        <p style="color: var(--gray);">Checking service availability...</p>
                    </div>
                </div>
            </div>

            <div id="page-airtime-to-cash" class="page">
                <div class="card" style="position: relative;">
                    <div class="coming-soon-overlay" id="a2cOverlay">
                        <div class="coming-soon-badge">
                            <i class="fas fa-clock"></i>
                            Coming Soon!
                        </div>
                    </div>

                    <h3 class="card-title"><i class="fas fa-exchange-alt"></i> Airtime to Cash</h3>

                    <div class="rate-display">
                        <p>Conversion Rate</p>
                        <p class="rate">80% Cashback</p>
                        <p style="font-size: 0.85rem;">KES 100 Airtime = KES 80 Cash</p>
                    </div>

                    <form id="airtimeToCashForm">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-coins"></i> Airtime Amount to Convert *</label>
                            <input type="number" class="form-input" id="a2cAmount" placeholder="Enter amount" min="10" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Your Phone Number *</label>
                            <div class="phone-wrapper">
                                <span class="phone-prefix">+254</span>
                                <input type="tel" class="form-input" id="a2cPhone" placeholder="7XXXXXXXX" maxlength="9" required>
                            </div>
                        </div>

                        <div id="dialCodeSection" style="display: none;">
                            <p style="margin-bottom: 10px;">Dial this code to send airtime:</p>
                            <div class="dial-code" id="dialCode">*140*100*0732202740#</div>
                            <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 15px;">After sending, click "Done" below</p>
                        </div>

                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary" id="sambazaBtn">
                                <i class="fas fa-paper-plane"></i> Generate Dial Code
                            </button>
                            <button type="button" class="btn btn-secondary" id="doneBtn" style="display: none;" onclick="showVerifyA2C()">
                                <i class="fas fa-check"></i> Done - I've Sent Airtime
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="page-verify-a2c" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-check-circle"></i> Verify Airtime Sent</h3>
                    <p style="margin-bottom: 20px; color: var(--gray);">Enter the confirmation message code from Safaricom to verify your transfer.</p>
                    <form id="verifyA2CForm">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Your Phone Number</label>
                            <input type="text" class="form-input" id="verifyA2CPhone" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-key"></i> Confirmation Code *</label>
                            <input type="text" class="form-input" id="verifyA2CCode" placeholder="Enter confirmation code" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check"></i> Verify
                        </button>
                    </form>
                </div>
            </div>

            <div id="page-transactions" class="page">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 class="card-title" style="margin: 0;"><i class="fas fa-history"></i> Transaction History</h3>
                        <button class="btn btn-outline" style="width: auto; padding: 10px 15px;" onclick="downloadTransactionsPDF()">
                            <i class="fas fa-download"></i> PDF
                        </button>
                    </div>
                    <div class="transaction-list" id="allTransactions">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <h3>No transactions</h3>
                            <p>Your transaction history will appear here</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="page-verify-deposit" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-check-circle"></i> Verify Deposit</h3>
                    <p style="margin-bottom: 20px; color: var(--gray);">If your deposit was successful but not reflected, enter your M-Pesa code to verify.</p>
                    <form id="verifyDepositForm">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-receipt"></i> M-Pesa Transaction Code *</label>
                            <input type="text" class="form-input" id="mpesaCode" placeholder="e.g., ABC123XYZ" required>
                        </div>
                        <button type="submit" class="btn btn-primary" id="verifyDepositBtn">
                            <i class="fas fa-search"></i> Verify Deposit
                        </button>
                    </form>
                </div>
            </div>

            <div id="page-bulk-sms" class="page">
                <div class="card" style="position: relative;">
                    <div class="coming-soon-overlay">
                        <div class="coming-soon-badge">
                            <i class="fas fa-clock"></i>
                            Coming Soon!
                        </div>
                    </div>
                    <h3 class="card-title"><i class="fas fa-sms"></i> Bulk SMS</h3>
                    <p>Send SMS to multiple recipients at affordable rates.</p>
                </div>
            </div>

            <div id="page-settings" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-cog"></i> Settings</h3>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-language"></i> Language</label>
                        <select class="form-input" id="languageSelect" onchange="changeLanguage(this.value)">
                            <option value="en">English</option>
                            <option value="sw">Kiswahili</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-moon"></i> Theme</label>
                        <select class="form-input" id="themeSelect" onchange="changeTheme(this.value)">
                            <option value="light">Light Mode</option>
                            <option value="dark">Dark Mode</option>
                        </select>
                    </div>
                    <div class="menu-divider"></div>
                    <button class="btn btn-outline" onclick="showPage('profile')" style="margin-bottom: 10px;">
                        <i class="fas fa-user"></i> Edit Profile
                    </button>
                    <button class="btn btn-outline" onclick="showPage('cookies')">
                        <i class="fas fa-cookie"></i> Cookie Preferences
                    </button>
                </div>
            </div>

            <div id="page-profile" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-user"></i> My Profile</h3>
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=airtimeuser&backgroundColor=b6e3f4" alt="Profile Avatar" class="profile-avatar">
                    <form id="profileForm">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" id="profileEmail" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Phone Number</label>
                            <div class="phone-wrapper">
                                <span class="phone-prefix">+254</span>
                                <input type="tel" class="form-input" id="profilePhone" maxlength="9" oninput="validateProfilePhone()">
                            </div>
                            <p class="validation-error" id="profilePhoneError">Enter a valid 9-digit phone number starting with 7 or 1</p>
                            <p class="validation-error" id="profilePhoneDuplicateError" style="color: var(--warning);">This phone number is already registered</p>
                        </div>
                        <button type="submit" class="btn btn-primary" id="profileSaveBtn">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </form>
                </div>
            </div>

            <div id="page-about" class="page">
                <div class="card">
                    <button class="btn btn-outline" onclick="history.back()" style="margin-bottom: 15px; width: auto; padding: 10px 20px;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <h3 class="card-title"><i class="fas fa-info-circle"></i> <span data-translate="aboutUs">About Us</span></h3>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <img src="about1.png" alt="Pesa Hub Kenya" style="max-width: 200px; border-radius: 16px; margin-bottom: 10px;" onerror="this.style.display='none'">
                    </div>
                    
                    <p style="margin-bottom: 15px; font-size: 1.05rem;"><strong>Pesahub Kenya</strong> is your trusted partner for buying and reselling airtime across all networks in Kenya, as well as accessing quick personal loans when you need them most.</p>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-bullseye" style="margin-right: 8px;"></i>Our Mission</h4>
                        <p style="color: var(--gray);">To provide Kenyans with the most convenient, affordable, and reliable airtime and financial services, empowering individuals and businesses to stay connected and financially secure.</p>
                    </div>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-eye" style="margin-right: 8px;"></i>Our Vision</h4>
                        <p style="color: var(--gray);">To become Kenya's leading digital airtime and micro-lending platform, known for innovation, trust, and exceptional customer service.</p>
                    </div>
                    
                    <p style="margin-bottom: 15px;">We provide a fast, secure, and reliable platform that allows you to:</p>
                    <ul style="margin-left: 20px; margin-bottom: 20px; line-height: 1.8;">
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Buy airtime instantly at discounted rates</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Resell airtime and earn profits</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Convert airtime to cash (Coming Soon)</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Deposit and manage your wallet easily</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Send airtime to any network</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Access quick personal loans with flexible repayment terms</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>Get emergency funds when you need them most</li>
                    </ul>

                    <!-- Loan Services Section -->
                    <div style="background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1)); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(46, 204, 113, 0.3);">
                        <h4 style="color: #27ae60; margin-bottom: 15px;"><i class="fas fa-hand-holding-usd" style="margin-right: 8px;"></i>Our Loan Services</h4>
                        <p style="color: var(--gray); margin-bottom: 10px;">Beyond airtime services, we also offer quick and convenient personal loans to help you meet your financial needs:</p>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Fast loan approval and disbursement</li>
                            <li>Competitive interest rates</li>
                            <li>Flexible repayment periods</li>
                            <li>No hidden charges or fees</li>
                            <li>Loans sent directly to your M-Pesa</li>
                        </ul>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 15px;">
                        <img src="about2.png" alt="Our Team" style="max-width: 100%; border-radius: 16px;" onerror="this.style.display='none'">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                        <div style="text-align: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-calendar-alt" style="font-size: 1.5rem; color: var(--primary); margin-bottom: 8px;"></i>
                            <p style="font-weight: 600;">Founded</p>
                            <p style="color: var(--gray);">2025</p>
                        </div>
                        <div style="text-align: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-map-marker-alt" style="font-size: 1.5rem; color: var(--primary); margin-bottom: 8px;"></i>
                            <p style="font-weight: 600;">Location</p>
                            <p style="color: var(--gray);">Nairobi, Kenya</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="page-contact" class="page">
                <div class="card">
                    <button class="btn btn-outline" onclick="history.back()" style="margin-bottom: 15px; width: auto; padding: 10px 20px;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <h3 class="card-title"><i class="fas fa-envelope"></i> <span data-translate="contactUs">Contact Us</span></h3>
                    
                    <p style="margin-bottom: 20px; font-size: 1.05rem;">Have questions about airtime, loans, or need help? We're here for you 24/7!</p>
                    
                    <div style="display: grid; gap: 15px; margin-bottom: 25px;">
                        <div style="display: flex; align-items: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fab fa-whatsapp" style="font-size: 2rem; color: #25d366; margin-right: 15px;"></i>
                            <div>
                                <p style="font-weight: 600; margin-bottom: 3px;">WhatsApp</p>
                                <a href="https://wa.me/254732202740" target="_blank" style="color: var(--primary);">+254 732202740</a>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-phone-alt" style="font-size: 2rem; color: var(--primary); margin-right: 15px;"></i>
                            <div>
                                <p style="font-weight: 600; margin-bottom: 3px;">Phone Call</p>
                                <a href="tel:+254732202740" style="color: var(--primary);">+254 732202740</a>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-envelope" style="font-size: 2rem; color: var(--info); margin-right: 15px;"></i>
                            <div>
                                <p style="font-weight: 600; margin-bottom: 3px;">Email</p>
                                <a href="mailto:support@airtimesolutionkenya.com" style="color: var(--primary);">support@airtimesolutionkenya.com</a>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; padding: 15px; background: var(--light); border-radius: 12px;">
                            <i class="fas fa-clock" style="font-size: 2rem; color: var(--secondary); margin-right: 15px;"></i>
                            <div>
                                <p style="font-weight: 600; margin-bottom: 3px;">Working Hours</p>
                                <p style="color: var(--gray);">24 Hours, 7 Days a Week</p>
                            </div>
                        </div>
                    </div>

                    <!-- Services We Support -->
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-concierge-bell" style="margin-right: 8px;"></i>We Can Help You With</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Airtime purchases and transactions</li>
                            <li>Wallet deposits and withdrawals</li>
                            <li>Loan applications and inquiries</li>
                            <li>Loan repayment support</li>
                            <li>Account issues and verification</li>
                            <li>Technical support</li>
                        </ul>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); padding: 20px; border-radius: 12px; text-align: center; color: white; margin-bottom: 15px;">
                        <h4 style="margin-bottom: 10px;"><i class="fas fa-headset" style="margin-right: 8px;"></i>Need Immediate Help?</h4>
                        <p style="opacity: 0.9; margin-bottom: 15px;">Our support team is always ready to assist you with airtime, loans, or any other questions.</p>
                        <a href="https://wa.me/254732202740" target="_blank" class="btn btn-secondary" style="display: inline-flex; width: auto;">
                            <i class="fab fa-whatsapp"></i> Chat Now on WhatsApp
                        </a>
                    </div>
                </div>
            </div>

            <div id="page-privacy" class="page">
                <div class="card">
                    <button class="btn btn-outline" onclick="history.back()" style="margin-bottom: 15px; width: auto; padding: 10px 20px;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <h3 class="card-title"><i class="fas fa-shield-alt"></i> <span data-translate="privacyPolicy">Privacy Policy</span></h3>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <img src="privacy1.png" alt="Privacy" style="max-width: 150px; border-radius: 12px;" onerror="this.style.display='none'">
                    </div>
                    
                    <div style="background: var(--light); padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                        <p style="color: var(--gray);"><i class="fas fa-calendar" style="margin-right: 8px;"></i><strong>Last Updated:</strong> December 2025</p>
                    </div>
                    
                    <p style="margin-bottom: 20px;">At Pesahub Kenya, we are committed to protecting your privacy and ensuring the security of your personal information for both our airtime and loan services.</p>
                    
                    <div style="border-left: 4px solid var(--primary); padding-left: 15px; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">1. Information We Collect</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Email address for account authentication</li>
                            <li>Phone number for airtime transactions and loan disbursements</li>
                            <li>Transaction history and amounts</li>
                            <li>Device information for security purposes</li>
                            <li>National ID for loan eligibility verification</li>
                            <li>Emergency contact details for loan applications</li>
                            <li>Employment and income information for loan assessment</li>
                        </ul>
                    </div>
                    
                    <div style="border-left: 4px solid var(--info); padding-left: 15px; margin-bottom: 20px;">
                        <h4 style="color: var(--info); margin-bottom: 10px;">2. How We Use Your Information</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Process airtime purchases and deposits</li>
                            <li>Process and disburse loan applications</li>
                            <li>Assess loan eligibility and creditworthiness</li>
                            <li>Send transaction and loan repayment confirmations</li>
                            <li>Provide customer support for all services</li>
                            <li>Improve our services and user experience</li>
                            <li>Prevent fraud and maintain security</li>
                            <li>Send loan repayment reminders</li>
                        </ul>
                    </div>
                    
                    <div style="border-left: 4px solid var(--success); padding-left: 15px; margin-bottom: 20px;">
                        <h4 style="color: var(--success); margin-bottom: 10px;">3. Data Security</h4>
                        <p style="color: var(--gray); margin-bottom: 10px;">We implement industry-standard security measures including:</p>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>SSL/TLS encryption for all data transfers</li>
                            <li>Secure payment processing via M-Pesa</li>
                            <li>Encrypted storage of sensitive loan application data</li>
                            <li>Regular security audits</li>
                            <li>Access controls and authentication</li>
                        </ul>
                    </div>

                    <div style="border-left: 4px solid #27ae60; padding-left: 15px; margin-bottom: 20px;">
                        <h4 style="color: #27ae60; margin-bottom: 10px;">4. Loan Data Protection</h4>
                        <p style="color: var(--gray); margin-bottom: 10px;">For loan services, we take extra precautions:</p>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Your loan information is kept strictly confidential</li>
                            <li>Emergency contacts are only used for loan recovery purposes</li>
                            <li>We do not share your financial data with unauthorized third parties</li>
                            <li>Loan history is securely stored and protected</li>
                        </ul>
                    </div>
                    
                    <div style="border-left: 4px solid var(--warning); padding-left: 15px; margin-bottom: 20px;">
                        <h4 style="color: var(--warning); margin-bottom: 10px;">5. Your Rights</h4>
                        <p style="color: var(--gray);">You have the right to access, correct, or delete your personal data. Contact us at support@airtimesolutionkenya.com for any privacy-related requests regarding airtime or loan services.</p>
                    </div>
                    
                    <div style="text-align: center;">
                        <img src="privacy2.png" alt="Data Protection" style="max-width: 100%; border-radius: 12px;" onerror="this.style.display='none'">
                    </div>
                </div>
            </div>

            <div id="page-terms" class="page">
                <div class="card">
                    <button class="btn btn-outline" onclick="history.back()" style="margin-bottom: 15px; width: auto; padding: 10px 20px;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <h3 class="card-title"><i class="fas fa-file-contract"></i> <span data-translate="termsOfService">Terms of Service</span></h3>
                    
                    <div style="background: var(--light); padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                        <p style="color: var(--gray);"><i class="fas fa-calendar" style="margin-right: 8px;"></i><strong>Effective Date:</strong> December 2025</p>
                    </div>
                    
                    <p style="margin-bottom: 20px;">Please read these Terms of Service carefully before using Pesahub Kenya's airtime and loan services.</p>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-handshake" style="margin-right: 8px;"></i>1. Acceptance of Terms</h4>
                        <p style="color: var(--gray);">By accessing or using Pesahub Kenya, you agree to be bound by these Terms of Service for all our services including airtime transactions and loan facilities. If you do not agree, please do not use our services.</p>
                    </div>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-cogs" style="margin-right: 8px;"></i>2. Services Provided</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Airtime purchase for Safaricom, Airtel, and Telkom networks</li>
                            <li>Wallet deposit and management</li>
                            <li>Airtime to cash conversion (coming soon)</li>
                            <li>Personal loan facilities with flexible terms</li>
                            <li>Quick loan disbursement via M-Pesa</li>
                            <li>All completed transactions are final and non-reversible</li>
                        </ul>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1)); padding: 20px; border-radius: 12px; margin-bottom: 15px; border: 1px solid rgba(46, 204, 113, 0.3);">
                        <h4 style="color: #27ae60; margin-bottom: 10px;"><i class="fas fa-hand-holding-usd" style="margin-right: 8px;"></i>3. Loan Terms and Conditions</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Loans are subject to eligibility verification and approval</li>
                            <li>Interest rates and repayment terms are disclosed before disbursement</li>
                            <li>You must repay loans within the agreed timeframe</li>
                            <li>Late payments may incur additional fees as specified</li>
                            <li>Defaulting on loans may affect your future eligibility</li>
                            <li>Emergency contacts may be contacted for loan recovery purposes</li>
                            <li>Loan disbursements are made via M-Pesa to your registered number</li>
                        </ul>
                    </div>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-user-shield" style="margin-right: 8px;"></i>4. User Responsibilities</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Maintain the security of your account credentials</li>
                            <li>Provide accurate phone numbers for transactions</li>
                            <li>Provide truthful information for loan applications</li>
                            <li>Repay loans within the agreed timeframe</li>
                            <li>Report any unauthorized activity immediately</li>
                            <li>Use services only for lawful purposes</li>
                        </ul>
                    </div>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-ban" style="margin-right: 8px;"></i>5. Prohibited Activities</h4>
                        <ul style="margin-left: 15px; color: var(--gray); line-height: 1.8;">
                            <li>Fraudulent transactions or money laundering</li>
                            <li>Providing false information for loan applications</li>
                            <li>Attempting to exploit system vulnerabilities</li>
                            <li>Using the service for illegal purposes</li>
                            <li>Sharing account credentials with others</li>
                            <li>Taking loans with no intention to repay</li>
                        </ul>
                    </div>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-gavel" style="margin-right: 8px;"></i>6. Limitation of Liability</h4>
                        <p style="color: var(--gray);">Pesahub Kenya shall not be liable for any indirect, incidental, or consequential damages arising from the use of our airtime or loan services. Our maximum liability is limited to the amount of the transaction in question.</p>
                    </div>
                </div>
            </div>

            <div id="page-cookies" class="page">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-cookie-bite"></i> Cookie Policy</h3>
                    
                    <p style="margin-bottom: 20px;">We use cookies to enhance your experience on Pesahub Kenya. This policy explains what cookies are and how we use them.</p>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-question-circle" style="margin-right: 8px;"></i>What Are Cookies?</h4>
                        <p style="color: var(--gray);">Cookies are small text files stored on your device when you visit a website. They help us remember your preferences and improve your experience.</p>
                    </div>
                    
                    <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;"><i class="fas fa-list" style="margin-right: 8px;"></i>Types of Cookies We Use</h4>
                        <div style="margin-top: 15px;">
                            <div style="display: flex; align-items: start; margin-bottom: 15px;">
                                <i class="fas fa-check-circle" style="color: var(--success); margin-right: 10px; margin-top: 3px;"></i>
                                <div>
                                    <p style="font-weight: 600;">Essential Cookies</p>
                                    <p style="color: var(--gray); font-size: 0.9rem;">Required for basic functionality like authentication and security.</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; margin-bottom: 15px;">
                                <i class="fas fa-chart-bar" style="color: var(--info); margin-right: 10px; margin-top: 3px;"></i>
                                <div>
                                    <p style="font-weight: 600;">Analytics Cookies</p>
                                    <p style="color: var(--gray); font-size: 0.9rem;">Help us understand how users interact with our platform.</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start;">
                                <i class="fas fa-sliders-h" style="color: var(--secondary); margin-right: 10px; margin-top: 3px;"></i>
                                <div>
                                    <p style="font-weight: 600;">Preference Cookies</p>
                                    <p style="color: var(--gray); font-size: 0.9rem;">Remember your settings like language and theme preferences.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); padding: 20px; border-radius: 12px; color: white; text-align: center;">
                        <h4 style="margin-bottom: 15px;"><i class="fas fa-cookie" style="margin-right: 8px;"></i>Your Cookie Preferences</h4>
                        <p style="opacity: 0.9; margin-bottom: 15px;">Choose which cookies you want to accept:</p>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button class="btn btn-secondary" style="flex: 1; max-width: 150px;" onclick="acceptCookies()">Accept All</button>
                            <button class="btn" style="flex: 1; max-width: 150px; background: rgba(255,255,255,0.2); color: white;" onclick="rejectCookies()">Essential Only</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="page-admin" class="page">
                <div id="adminLogin" class="card" style="max-width: 400px; margin: 0 auto;">
                    <h3 class="card-title"><i class="fas fa-user-shield"></i> Staff Login</h3>
                    <form id="adminLoginForm">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-lock"></i> Enter staffs password</label>
                            <input type="password" class="form-input" id="adminPassword" placeholder="Enter staff password" required>
                        </div>
                        <button type="submit" class="btn btn-primary" id="adminLoginBtn">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                </div>

                <div id="adminDashboard" style="display: none;">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-users"></i>
                            <div class="value" id="statTotalUsers">0</div>
                            <div class="label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-wallet"></i>
                            <div class="value" id="statTotalDeposits">0</div>
                            <div class="label">Total Deposits</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-mobile-alt"></i>
                            <div class="value" id="statTotalAirtime">0</div>
                            <div class="label">Total Airtime</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="value" id="statPendingVerifications">0</div>
                            <div class="label">Pending</div>
                        </div>
                    </div>

                    <div class="admin-tabs">
                        <button class="admin-tab active" onclick="showAdminTab('users')">Users</button>
                        <button class="admin-tab" onclick="showAdminTab('savings')">User Savings</button>
                        <button class="admin-tab" onclick="showAdminTab('allnotifications')">All Notifications</button>
                        <button class="admin-tab" onclick="showAdminTab('transactions')">Transactions</button>
                        <button class="admin-tab" onclick="showAdminTab('verifications')">Verifications</button>
                        <button class="admin-tab" onclick="showAdminTab('notifications')">Send Notification</button>
                        <button class="admin-tab" onclick="showAdminTab('settings')">Settings</button>
                    </div>

                    <div class="card" id="adminTabUsers">
                        <h3 class="card-title">All Users</h3>
                        <div class="table-responsive">
                            <table class="data-table" id="usersTable">
                                <thead>
                                    <tr>
                                        <th>Email</th>
                                        <th>Balance</th>
                                        <th>Bonus</th>
                                        <th>Savings</th>
                                        <th>Status</th>
                                        <th>Created</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card" id="adminTabSavings" style="display: none;">
                        <h3 class="card-title"><i class="fas fa-piggy-bank"></i> User Savings Balances</h3>
                        <div style="margin-bottom: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                            <p style="font-size: 1.2rem; font-weight: 700; color: var(--primary);">Total Savings: <span id="totalSavingsAmount">KES 0.00</span></p>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table" id="savingsTable">
                                <thead>
                                    <tr>
                                        <th>Email</th>
                                        <th>Savings Balance</th>
                                        <th>Last Deposit</th>
                                        <th>Total Deposits</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card" id="adminTabAllnotifications" style="display: none;">
                        <h3 class="card-title"><i class="fas fa-bell"></i> All User Notifications</h3>
                        <div style="margin-bottom: 15px;">
                            <input type="text" class="form-input" id="notifSearchInput" placeholder="Search by email or title..." oninput="filterNotifications()">
                        </div>
                        <div class="table-responsive">
                            <table class="data-table" id="allNotificationsTable">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Title</th>
                                        <th>Message</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card" id="adminTabTransactions" style="display: none;">
                        <h3 class="card-title">All Transactions</h3>
                        <div class="table-responsive">
                            <table class="data-table" id="adminTxTable">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Type</th>
                                        <th>Amount</th>
                                        <th>Phone</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card" id="adminTabVerifications" style="display: none;">
                        <h3 class="card-title">Deposit Verifications</h3>
                        <div class="table-responsive">
                            <table class="data-table" id="verificationsTable">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>M-Pesa Code</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card" id="adminTabNotifications" style="display: none;">
                        <h3 class="card-title">Send Notification</h3>
                        <form id="adminNotificationForm">
                            <div class="form-group">
                                <label class="form-label">Recipient</label>
                                <select class="form-input" id="notifRecipient">
                                    <option value="">All Users</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Title</label>
                                <input type="text" class="form-input" id="notifTitle" placeholder="Notification title" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Message</label>
                                <textarea class="form-input" id="notifMessage" rows="4" placeholder="Enter your message" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i> Send Notification
                            </button>
                        </form>
                    </div>

                    <div class="card" id="adminTabSettings" style="display: none;">
                        <h3 class="card-title">System Settings</h3>
                        <div class="form-group">
                            <label class="form-label">Float Status</label>
                            <select class="form-input" id="floatStatusSelect" onchange="updateFloatStatus(this.value)">
                                <option value="false">Available</option>
                                <option value="true">Low / Unavailable</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-top: 20px;">
                            <label class="form-label">Deposit Status</label>
                            <select class="form-input" id="depositStatusSelect" onchange="updateDepositStatus(this.value)">
                                <option value="false">Enabled</option>
                                <option value="true">Disabled</option>
                            </select>
                            <p style="font-size: 0.85rem; color: var(--gray); margin-top: 5px;">When disabled, users cannot make new deposits.</p>
                        </div>
                    </div>

                    <button class="btn btn-outline" style="margin-top: 20px;" onclick="logoutAdmin()">
                        <i class="fas fa-sign-out-alt"></i> Logout Admin
                    </button>
                </div>
            </div>

            <!-- Loan Dashboard Page -->
            <div id="page-loan-dashboard" class="page">
                <div class="loan-hero-section" style="background: linear-gradient(135deg, #27ae60 0%, #1e8449 50%, #186a3b 100%); border-radius: 16px; padding: 45px 20px; margin: 0 0 20px 0; position: relative; box-shadow: 0 15px 35px rgba(39, 174, 96, 0.3);">
                    <div style="position: relative; z-index: 1; text-align: center; color: white;">
                        <div style="font-size: 3.5rem; margin-bottom: 20px; animation: bounce 2s ease-in-out infinite;">
                            <i class="fas fa-hand-holding-usd" style="color: #f4a020;"></i>
                        </div>
                        <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 12px;">Get Instant Loans</h1>
                        <p style="font-size: 1.15rem; opacity: 0.95; margin-bottom: 10px; font-weight: 500;">Up to <span style="color: #f4a020; font-size: 1.3rem;">KES 15,000</span></p>
                        <p style="opacity: 0.9; margin-bottom: 28px; line-height: 1.6;"> Fast approval in minutes |  Direct to M-Pesa |  Low interest rates from 1.5%</p>
                        <button class="btn btn-secondary" onclick="checkLoanApplicationStatus()" style="display: inline-flex; align-items: center; gap: 12px; width: auto; padding: 16px 45px; font-size: 1.1rem; background: linear-gradient(135deg, #f4a020, #e67e22); border: none; color: white; font-weight: 700; border-radius: 12px; cursor: pointer; box-shadow: 0 6px 20px rgba(244, 160, 32, 0.4); transition: all 0.3s;">
                            <i class="fas fa-rocket" style="font-size: 1.2rem;"></i> Apply Now & Get Instant Approval
                        </button>
                    </div>
                </div>

                <div class="page-content">
                    <!-- Factors and Requirements -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-clipboard-list"></i> Factors & Requirements</h3>
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-id-card" style="font-size: 1.5rem; color: var(--primary);"></i>
                                <div>
                                    <h4 style="font-size: 0.95rem; margin-bottom: 3px;">Valid Kenyan ID</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Must be 18 years or older</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-phone-alt" style="font-size: 1.5rem; color: var(--success);"></i>
                                <div>
                                    <h4 style="font-size: 0.95rem; margin-bottom: 3px;">Active M-Pesa Account</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Safaricom line required for disbursement</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-briefcase" style="font-size: 1.5rem; color: var(--info);"></i>
                                <div>
                                    <h4 style="font-size: 0.95rem; margin-bottom: 3px;">Proof of Income</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Employed, self-employed, or business owner</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- How It Works -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-cogs"></i> How It Works</h3>
                        <div style="display: grid; gap: 20px;">
                            <div style="display: flex; gap: 15px; align-items: flex-start;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">1</div>
                                <div>
                                    <h4 style="font-size: 1rem; margin-bottom: 5px;">Fill Application Form</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Complete your personal and financial details in our simple eligibility form</p>
                                </div>
                            </div>
                            <div style="display: flex; gap: 15px; align-items: flex-start;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">2</div>
                                <div>
                                    <h4 style="font-size: 1rem; margin-bottom: 5px;">Quick Verification</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Our system verifies your information with partner lenders instantly</p>
                                </div>
                            </div>
                            <div style="display: flex; gap: 15px; align-items: flex-start;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">3</div>
                                <div>
                                    <h4 style="font-size: 1rem; margin-bottom: 5px;">Choose Your Offer</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Select from multiple loan offers from our trusted partners</p>
                                </div>
                            </div>
                            <div style="display: flex; gap: 15px; align-items: flex-start;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--success), #2ecc71)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">4</div>
                                <div>
                                    <h4 style="font-size: 1rem; margin-bottom: 5px;">Receive Funds</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Get your money directly to your M-Pesa within minutes!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Why Choose Us -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-star"></i> Why Choose Us</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-bolt" style="font-size: 2rem; color: var(--secondary); margin-bottom: 10px;"></i>
                                <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Fast Approval</h4>
                                <p style="font-size: 0.8rem; color: var(--gray);">Get approved in minutes</p>
                            </div>
                            <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-percent" style="font-size: 2rem; color: var(--success); margin-bottom: 10px;"></i>
                                <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Low Interest</h4>
                                <p style="font-size: 0.8rem; color: var(--gray);">Competitive rates from 1.5%</p>
                            </div>
                            <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-calendar-alt" style="font-size: 2rem; color: var(--info); margin-bottom: 10px;"></i>
                                <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Flexible Terms</h4>
                                <p style="font-size: 0.8rem; color: var(--gray);">60-100 days repayment</p>
                            </div>
                            <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 12px;">
                                <i class="fas fa-shield-alt" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;"></i>
                                <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Secure & Safe</h4>
                                <p style="font-size: 0.8rem; color: var(--gray);">Data encryption</p>
                            </div>
                        </div>
                    </div>

                    <!-- Testimonials -->
                    <div class="card" style="margin-bottom: 20px; overflow: hidden;">
                        <h3 class="card-title"><i class="fas fa-comments"></i> Customer Testimonials</h3>
                        <div id="testimonialSlider" style="overflow: hidden;">
                            <div id="testimonialTrack" style="display: flex; transition: transform 0.5s ease; animation: scrollTestimonials 15s linear infinite;">
                                <div style="min-width: 100%; padding: 20px; background: var(--light); border-radius: 12px; margin-right: 15px;">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                        <div style="width: 50px; height: 50px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">JM</div>
                                        <div>
                                            <h4 style="font-size: 0.95rem;">John M.</h4>
                                            <div style="color: var(--secondary);"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                        </div>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--gray); font-style: italic;">"I got my loan in just 5 minutes! The process was so easy and the interest rate was fair. Highly recommended!"</p>
                                </div>
                                <div style="min-width: 100%; padding: 20px; background: var(--light); border-radius: 12px; margin-right: 15px;">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                        <div style="width: 50px; height: 50px; background: var(--success); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">MW</div>
                                        <div>
                                            <h4 style="font-size: 0.95rem;">Mary W.</h4>
                                            <div style="color: var(--secondary);"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div>
                                        </div>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--gray); font-style: italic;">"Best loan service I've used. No hidden charges and the support team is always helpful!"</p>
                                </div>
                                <div style="min-width: 100%; padding: 20px; background: var(--light); border-radius: 12px;">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                        <div style="width: 50px; height: 50px; background: var(--info); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">PK</div>
                                        <div>
                                            <h4 style="font-size: 0.95rem;">Peter K.</h4>
                                            <div style="color: var(--secondary);"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                        </div>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--gray); font-style: italic;">"Emergency came up and needed cash fast. This service saved me! Money was in my M-Pesa in minutes."</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAQ -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-question-circle"></i> Frequently Asked Questions</h3>
                        <div style="display: grid; gap: 15px;">
                            <div style="background: var(--light); padding: 15px; border-radius: 12px; cursor: pointer;" onclick="this.classList.toggle('expanded')">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <h4 style="font-size: 0.95rem;">How long does approval take?</h4>
                                    <i class="fas fa-chevron-down" style="color: var(--gray);"></i>
                                </div>
                                <p style="font-size: 0.85rem; color: var(--gray); margin-top: 10px;">Approval typically takes 2-5 minutes after submitting your application.</p>
                            </div>
                            <div style="background: var(--light); padding: 15px; border-radius: 12px; cursor: pointer;" onclick="this.classList.toggle('expanded')">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <h4 style="font-size: 0.95rem;">What is the maximum loan amount?</h4>
                                    <i class="fas fa-chevron-down" style="color: var(--gray);"></i>
                                </div>
                                <p style="font-size: 0.85rem; color: var(--gray); margin-top: 10px;">First-time borrowers can get up to KES 15,000. This limit increases with good repayment history.</p>
                            </div>
                            <div style="background: var(--light); padding: 15px; border-radius: 12px; cursor: pointer;" onclick="this.classList.toggle('expanded')">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <h4 style="font-size: 0.95rem;">What are the interest rates?</h4>
                                    <i class="fas fa-chevron-down" style="color: var(--gray);"></i>
                                </div>
                                <p style="font-size: 0.85rem; color: var(--gray); margin-top: 10px;">Interest rates range from 1.5% to 2.1% depending on the loan provider and term.</p>
                            </div>
                            <div style="background: var(--light); padding: 15px; border-radius: 12px; cursor: pointer;" onclick="this.classList.toggle('expanded')">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <h4 style="font-size: 0.95rem;">What is the savings/fee requirement?</h4>
                                    <i class="fas fa-chevron-down" style="color: var(--gray);"></i>
                                </div>
                                <p style="font-size: 0.85rem; color: var(--gray); margin-top: 10px;">A small refundable savings deposit is required to secure your loan. This is returned after successful repayment.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Loan Provider Images -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-handshake"></i> Our Trusted Partners</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div style="background: var(--light); padding: 20px; border-radius: 12px; text-align: center;">
                                <img src="loan1.png" alt="Loan Partner 1" style="max-width: 100%; height: auto; border-radius: 8px;" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 200 100%22><rect fill=%22%2327ae60%22 width=%22200%22 height=%22100%22 rx=%228%22/><text x=%22100%22 y=%2255%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2216%22 font-family=%22sans-serif%22>Loan Partner</text></svg>'">
                                <p style="font-size: 0.85rem; color: var(--gray); margin-top: 10px;">Quick personal loans for emergencies</p>
                            </div>
                            <div style="background: var(--light); padding: 20px; border-radius: 12px; text-align: center;">
                                <img src="loan2.png" alt="Loan Partner 2" style="max-width: 100%; height: auto; border-radius: 8px;" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 200 100%22><rect fill=%22%232ecc71%22 width=%22200%22 height=%22100%22 rx=%228%22/><text x=%22100%22 y=%2255%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2216%22 font-family=%22sans-serif%22>Loan Partner</text></svg>'">
                                <p style="font-size: 0.85rem; color: var(--gray); margin-top: 10px;">Flexible repayment options available</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-link"></i> Quick Links</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                            <button class="btn btn-outline" onclick="showPage('about')" style="font-size: 0.9rem;"><i class="fas fa-info-circle"></i> About Us</button>
                            <button class="btn btn-outline" onclick="showPage('contact')" style="font-size: 0.9rem;"><i class="fas fa-envelope"></i> Contact Us</button>
                            <button class="btn btn-outline" onclick="showPage('terms')" style="font-size: 0.9rem;"><i class="fas fa-file-contract"></i> Terms</button>
                            <button class="btn btn-outline" onclick="showPage('privacy')" style="font-size: 0.9rem;"><i class="fas fa-shield-alt"></i> Privacy</button>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div style="text-align: center; padding: 20px; color: var(--gray); font-size: 0.85rem;">
                        <p>&copy; 2025 Pesahub Kenya. All rights reserved.</p>
                        <p style="margin-top: 5px;">Licensed digital lender partner</p>
                    </div>
                </div>
            </div>

            <!-- Loan Eligibility Form Page -->
            <div id="page-loan-eligibility" class="page">
                <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 20px; text-align: center;">
                    <i class="fas fa-file-alt" style="font-size: 2.5rem; margin-bottom: 10px;"></i>
                    <h2 style="font-size: 1.5rem; margin-bottom: 5px;">Loan Application Form</h2>
                    <p style="opacity: 0.9; font-size: 0.9rem;">Complete all required fields to check your eligibility</p>
                </div>
                <div class="page-content" style="padding-top: 20px;">
                    <form id="loanEligibilityForm">
                        <!-- Section 1: Personal Information -->
                        <div class="card" style="margin-bottom: 15px;">
                            <h3 class="card-title"><i class="fas fa-user"></i> 1. Personal Information</h3>
                            
                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-user-tag"></i> Full Name (as per ID) *</label>
                                <input type="text" class="form-input" id="loanFullName" placeholder="Enter your full name" required oninput="validateLoanName(this)">
                                <p class="loan-error" id="loanNameError" style="display: none; color: var(--danger); font-size: 0.8rem; margin-top: 5px;">Name must have at least 2 words</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-id-card"></i> National ID Number *</label>
                                <input type="text" class="form-input" id="loanIdNumber" placeholder="e.g., 12345678" maxlength="9" required oninput="validateLoanId(this)">
                                <p class="loan-error" id="loanIdError" style="display: none; color: var(--danger); font-size: 0.8rem; margin-top: 5px;">ID must be 8 or 9 digits</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-calendar-alt"></i> Date of Birth *</label>
                                <input type="date" class="form-input" id="loanDob" required onchange="validateLoanDob(this)">
                                <p class="loan-error" id="loanDobError" style="display: none; color: var(--danger); font-size: 0.8rem; margin-top: 5px;">You must be 18 years or older</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-venus-mars"></i> Gender *</label>
                                <select class="form-input" id="loanGender" required>
                                    <option value="">Select Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-ring"></i> Marital Status *</label>
                                <select class="form-input" id="loanMarital" required>
                                    <option value="">Select Status</option>
                                    <option value="single">Single</option>
                                    <option value="married">Married</option>
                                    <option value="divorced">Divorced</option>
                                    <option value="widowed">Widowed</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-phone"></i> Phone Number *</label>
                                <div class="phone-wrapper">
                                    <span class="phone-prefix">+254</span>
                                    <input type="tel" class="form-input" id="loanPhone" placeholder="7XXXXXXXX or 1XXXXXXXX" maxlength="9" required oninput="validateLoanPhone(this)">
                                </div>
                                <p class="loan-error" id="loanPhoneError" style="display: none; color: var(--danger); font-size: 0.8rem; margin-top: 5px;">Enter a valid 9-digit Kenyan phone number</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-map-marker-alt"></i> County *</label>
                                <select class="form-input" id="loanCounty" required onchange="updateLoanTowns()">
                                    <option value="">Select County</option>
                                    <option value="nairobi">Nairobi</option>
                                    <option value="mombasa">Mombasa</option>
                                    <option value="kisumu">Kisumu</option>
                                    <option value="nakuru">Nakuru</option>
                                    <option value="eldoret">Uasin Gishu</option>
                                    <option value="kiambu">Kiambu</option>
                                    <option value="machakos">Machakos</option>
                                    <option value="kajiado">Kajiado</option>
                                    <option value="nyeri">Nyeri</option>
                                    <option value="meru">Meru</option>
                                    <option value="kakamega">Kakamega</option>
                                    <option value="kilifi">Kilifi</option>
                                    <option value="bungoma">Bungoma</option>
                                    <option value="turkana">Turkana</option>
                                    <option value="nyandarua">Nyandarua</option>
                                    <option value="muranga">Murang'a</option>
                                    <option value="embu">Embu</option>
                                    <option value="trans_nzoia">Trans Nzoia</option>
                                    <option value="kericho">Kericho</option>
                                    <option value="bomet">Bomet</option>
                                    <option value="kisii">Kisii</option>
                                    <option value="narok">Narok</option>
                                    <option value="migori">Migori</option>
                                    <option value="homabay">Homa Bay</option>
                                    <option value="siaya">Siaya</option>
                                    <option value="nandi">Nandi</option>
                                    <option value="baringo">Baringo</option>
                                    <option value="laikipia">Laikipia</option>
                                    <option value="samburu">Samburu</option>
                                    <option value="westpokot">West Pokot</option>
                                    <option value="kitui">Kitui</option>
                                    <option value="makueni">Makueni</option>
                                    <option value="kwale">Kwale</option>
                                    <option value="taita_taveta">Taita Taveta</option>
                                    <option value="tana_river">Tana River</option>
                                    <option value="lamu">Lamu</option>
                                    <option value="garissa">Garissa</option>
                                    <option value="wajir">Wajir</option>
                                    <option value="mandera">Mandera</option>
                                    <option value="marsabit">Marsabit</option>
                                    <option value="isiolo">Isiolo</option>
                                    <option value="tharaka_nithi">Tharaka Nithi</option>
                                    <option value="kirinyaga">Kirinyaga</option>
                                    <option value="vihiga">Vihiga</option>
                                    <option value="busia">Busia</option>
                                    <option value="elgeyo_marakwet">Elgeyo Marakwet</option>
                                    <option value="nyamira">Nyamira</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-city"></i> Town/Area</label>
                                <select class="form-input" id="loanTown">
                                    <option value="">Select Town (Optional)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-home"></i> Physical Address *</label>
                                <input type="text" class="form-input" id="loanAddress" placeholder="Enter your physical address" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-envelope"></i> Email Address</label>
                                <input type="email" class="form-input" id="loanEmail" readonly style="background: var(--light); cursor: not-allowed;">
                                <p style="font-size: 0.8rem; color: var(--gray); margin-top: 5px;"><i class="fas fa-lock"></i> Email from your registered account</p>
                            </div>
                        </div>

                        <!-- Section 2: Emergency Contacts -->
                        <div class="card" style="margin-bottom: 15px;">
                            <h3 class="card-title"><i class="fas fa-users"></i> 2. Emergency Contacts</h3>
                            
                            <div style="background: var(--light); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 10px;"><i class="fas fa-user-friends"></i> Contact 1 *</h4>
                                <div class="form-group">
                                    <label class="form-label">Contact Name *</label>
                                    <input type="text" class="form-input" id="emergency1Name" placeholder="Full name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relationship *</label>
                                    <select class="form-input" id="emergency1Relationship" required>
                                        <option value="">Select Relationship</option>
                                        <option value="spouse">Spouse</option>
                                        <option value="parent">Parent</option>
                                        <option value="sibling">Sibling</option>
                                        <option value="friend">Friend</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">Phone Number *</label>
                                    <div class="phone-wrapper">
                                        <span class="phone-prefix">+254</span>
                                        <input type="tel" class="form-input" id="emergency1Phone" placeholder="7XXXXXXXX" maxlength="9" required>
                                    </div>
                                </div>
                            </div>

                            <div style="background: var(--light); padding: 15px; border-radius: 12px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 10px;"><i class="fas fa-user-friends"></i> Contact 2 *</h4>
                                <div class="form-group">
                                    <label class="form-label">Contact Name *</label>
                                    <input type="text" class="form-input" id="emergency2Name" placeholder="Full name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relationship *</label>
                                    <select class="form-input" id="emergency2Relationship" required>
                                        <option value="">Select Relationship</option>
                                        <option value="spouse">Spouse</option>
                                        <option value="parent">Parent</option>
                                        <option value="sibling">Sibling</option>
                                        <option value="friend">Friend</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">Phone Number *</label>
                                    <div class="phone-wrapper">
                                        <span class="phone-prefix">+254</span>
                                        <input type="tel" class="form-input" id="emergency2Phone" placeholder="7XXXXXXXX" maxlength="9" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3: Employment & Financial -->
                        <div class="card" style="margin-bottom: 15px;">
                            <h3 class="card-title"><i class="fas fa-briefcase"></i> 3. Employment & Financial Information</h3>
                            
                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-user-tie"></i> Employment Status *</label>
                                <select class="form-input" id="loanEmployment" required>
                                    <option value="">Select Status</option>
                                    <option value="employed">Employed</option>
                                    <option value="self-employed">Self-Employed</option>
                                    <option value="business">Business Owner</option>
                                    <option value="student">Student</option>
                                    <option value="unemployed">Unemployed</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-money-bill-wave"></i> Monthly Income (KES) *</label>
                                <select class="form-input" id="loanIncome" required>
                                    <option value="">Select Income Range</option>
                                    <option value="0-10000">Below KES 10,000</option>
                                    <option value="10000-30000">KES 10,000 - 30,000</option>
                                    <option value="30000-50000">KES 30,000 - 50,000</option>
                                    <option value="50000-100000">KES 50,000 - 100,000</option>
                                    <option value="100000+">Above KES 100,000</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-building"></i> Employer/Business Name *</label>
                                <input type="text" class="form-input" id="loanEmployer" placeholder="Enter employer or business name" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-file-invoice"></i> KRA PIN (Optional)</label>
                                <input type="text" class="form-input" id="loanKraPin" placeholder="e.g., A123456789B">
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-bullseye"></i> Loan Purpose *</label>
                                <select class="form-input" id="loanPurpose" required>
                                    <option value="">Select Purpose</option>
                                    <option value="emergency">Emergency</option>
                                    <option value="business">Business</option>
                                    <option value="education">Education</option>
                                    <option value="medical">Medical</option>
                                    <option value="personal">Personal</option>
                                    <option value="rent">Rent/Bills</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-question-circle"></i> Do you have any existing loan? *</label>
                                <select class="form-input" id="loanExisting" required>
                                    <option value="">Select Answer</option>
                                    <option value="no">No, I don't have any loan</option>
                                    <option value="yes_repaying">Yes, but I'm repaying on time</option>
                                    <option value="yes_defaulted">Yes, but I have defaulted</option>
                                    <option value="yes_cleared">Yes, but I have cleared it</option>
                                </select>
                            </div>
                        </div>

                        <!-- Section 4: Terms Acceptance -->
                        <div class="card" style="margin-bottom: 20px;">
                            <h3 class="card-title"><i class="fas fa-check-double"></i> 4. Terms Acceptance</h3>
                            
                            <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 15px;">
                                <input type="checkbox" id="loanTermsAccept" style="width: 20px; height: 20px; margin-top: 3px;" required>
                                <label for="loanTermsAccept" style="font-size: 0.9rem; color: var(--dark);">I confirm that all information provided is accurate and I agree to the <a href="#" onclick="showPage('terms'); return false;" style="color: var(--primary);">Terms and Conditions</a></label>
                            </div>
                            
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <input type="checkbox" id="loanPrivacyAccept" style="width: 20px; height: 20px; margin-top: 3px;" required>
                                <label for="loanPrivacyAccept" style="font-size: 0.9rem; color: var(--dark);">I consent to the processing of my personal data as described in the <a href="#" onclick="showPage('privacy'); return false;" style="color: var(--primary);">Privacy Policy</a></label>
                            </div>
                        </div>

                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary" id="submitLoanBtn">
                                <i class="fas fa-paper-plane"></i> Submit Application
                            </button>
                            <button type="button" class="btn btn-outline" onclick="showPage('loan-dashboard')">
                                <i class="fas fa-arrow-left"></i> Back to Loan Dashboard
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Loan Processing Page -->
            <div id="page-loan-processing" class="page">
                <div style="min-height: calc(100vh - 70px); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; text-align: center; background: linear-gradient(180deg, var(--light) 0%, #e8f5e9 100%);">
                    <!-- Animated Processing Icon -->
                    <div style="position: relative; width: 120px; height: 120px; margin-bottom: 30px;">
                        <div style="width: 120px; height: 120px; border: 5px solid rgba(39, 174, 96, 0.2); border-top-color: var(--success); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                            <i class="fas fa-search-dollar" style="font-size: 2.5rem; color: var(--success); animation: pulse 1.5s ease-in-out infinite;"></i>
                        </div>
                    </div>
                    
                    <h2 style="font-size: 1.6rem; color: var(--primary); margin-bottom: 10px; font-weight: 700;">Processing Your Application</h2>
                    <p style="color: var(--gray); margin-bottom: 30px; font-size: 1rem;">Connecting to partner lenders...</p>
                    
                    <!-- System Status Card -->
                    <div style="width: 100%; max-width: 400px; background: var(--white); border-radius: 16px; padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                            <span class="live-indicator" style="background: var(--success);"></span>
                            <span style="font-size: 0.85rem; color: var(--success); font-weight: 600;">SYSTEM LIVE</span>
                        </div>
                        <div id="loanProcessingSteps">
                            <div class="processing-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; background: rgba(39, 174, 96, 0.1); border-radius: 10px;">
                                <i class="fas fa-check-circle" style="color: var(--success); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem; font-weight: 500;">Validating personal information...</span>
                            </div>
                            <div class="processing-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; background: rgba(26, 95, 42, 0.1); border-radius: 10px;">
                                <i class="fas fa-spinner fa-spin" style="color: var(--primary); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem; font-weight: 500;">Verifying identity with CRB...</span>
                            </div>
                            <div class="processing-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; border-radius: 10px; opacity: 0.5;">
                                <i class="fas fa-circle" style="color: var(--gray); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem;">Checking credit eligibility...</span>
                            </div>
                            <div class="processing-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; border-radius: 10px; opacity: 0.5;">
                                <i class="fas fa-circle" style="color: var(--gray); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem;">Contacting partner lenders...</span>
                            </div>
                            <div class="processing-step" style="display: flex; align-items: center; gap: 12px; padding: 10px; border-radius: 10px; opacity: 0.5;">
                                <i class="fas fa-circle" style="color: var(--gray); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem;">Preparing loan offers...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Timer Badge -->
                    <div style="background: linear-gradient(135deg, var(--success), #2ecc71); color: white; padding: 18px 40px; border-radius: 50px; font-size: 1.3rem; font-weight: 700; box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);">
                        <i class="fas fa-hourglass-half" style="margin-right: 10px; animation: pulse 1s ease-in-out infinite;"></i>
                        <span id="loanProcessingTimer">20</span> seconds
                    </div>
                    
                    <div style="margin-top: 25px; padding: 15px 20px; background: rgba(39, 174, 96, 0.1); border-radius: 12px;">
                        <p style="font-size: 0.9rem; color: var(--primary);"><i class="fas fa-shield-alt" style="margin-right: 8px;"></i> Your data is encrypted and secure</p>
                    </div>
                </div>
            </div>

            <!-- Loan Offers Loading Page -->
            <div id="page-loan-offers-loading" class="page">
                <div style="min-height: calc(100vh - 70px); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; text-align: center; background: linear-gradient(180deg, #e8f5e9 0%, var(--light) 100%);">
                    <div style="width: 80px; height: 80px; border: 4px solid rgba(39, 174, 96, 0.2); border-top-color: var(--success); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 30px;"></div>
                    <h2 style="font-size: 1.4rem; color: var(--primary); margin-bottom: 10px;">Generating Loan Offers</h2>
                    <p style="color: var(--gray);">Please wait...</p>
                </div>
            </div>

            <!-- Loan Offers Page -->
            <div id="page-loan-offers" class="page">
                <div style="background: linear-gradient(135deg, var(--success), #27ae60); color: white; padding: 30px 20px; text-align: center; position: relative; overflow: hidden;">
                    <img src="congrats.png" alt="" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.15;" onerror="this.style.display='none'">
                    <div style="position: relative; z-index: 1;">
                        <i class="fas fa-trophy" style="font-size: 3.5rem; margin-bottom: 15px; animation: pulse 2s ease-in-out infinite;"></i>
                        <h2 style="font-size: 1.8rem; margin-bottom: 10px; font-weight: 700;">Congratulations!</h2>
                        <p style="opacity: 0.95; font-size: 1.05rem;">You qualify for the following loan offers</p>
                    </div>
                </div>
                
                <div class="page-content" style="padding-top: 20px;">
                    <!-- Applicant Info Card -->
                    <div class="card" style="margin-bottom: 20px; background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.05)); border: 2px solid rgba(39, 174, 96, 0.2);">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="loan-avatar.png" alt="User" style="width: 65px; height: 65px; border-radius: 50%; object-fit: cover; border: 3px solid var(--success);" onerror="this.outerHTML='<div style=\\'width: 65px; height: 65px; background: linear-gradient(135deg, var(--success), #2ecc71); border-radius: 50%; display: flex; align-items: center; justify-content: center;\\'><i class=\\'fas fa-user-check\\' style=\\'font-size: 1.5rem; color: white;\\'></i></div>'">
                            <div>
                                <h4 id="loanOfferName" style="font-size: 1.15rem; font-weight: 600;">-</h4>
                                <p style="font-size: 0.85rem; color: var(--gray);">ID: <span id="loanOfferId">-</span></p>
                                <p style="font-size: 0.85rem; color: var(--gray);">Phone: <span id="loanOfferPhone">-</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Loan Offer Cards -->
                    <div id="loanOfferCards" style="display: grid; gap: 20px;">
                        <!-- Linker Mkopo -->
                        <div class="card loan-offer-card" style="border: 3px solid #3498db; transition: all 0.3s; animation: cardFloat1 3s ease-in-out infinite; background: linear-gradient(135deg, rgba(52, 152, 219, 0.05), rgba(255,255,255,1));">
                            <style>
                                @keyframes cardFloat1 { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
                                @keyframes cardFloat2 { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
                                @keyframes cardFloat3 { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
                            </style>
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <img src="linker-logo.png" alt="Linker Mkopo" style="width: 60px; height: 60px; border-radius: 12px; object-fit: cover; border: 2px solid #3498db;" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 60 60%22><rect fill=%22%233498db%22 width=%2260%22 height=%2260%22 rx=%2212%22/><text x=%2230%22 y=%2235%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2210%22 font-family=%22sans-serif%22>LM</text></svg>'">
                                <div>
                                    <h4 style="font-size: 1.1rem; color: var(--primary);">Linker Mkopo</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Quick Personal Loans</p>
                                </div>
                            </div>
                            <div style="text-align: center; background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                                <h3 style="font-size: 2rem; color: var(--success);">KES 4,000</h3>
                                <p style="font-size: 0.9rem; color: var(--gray);">Receive KES 3,870 to your M-Pesa</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 15px;">
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Savings Required</p>
                                    <p style="font-weight: 600; color: var(--warning);">KES 130</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Repayment</p>
                                    <p style="font-weight: 600;">KES 4,070</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Duration</p>
                                    <p style="font-weight: 600;">60 Days</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Interest</p>
                                    <p style="font-weight: 600; color: var(--success);">1.75%</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="selectLoanOffer('linker', 4000, 130, 3870, 4070, 60, 1.75)">
                                <i class="fas fa-check"></i> Select This Offer
                            </button>
                        </div>

                        <!-- Pesa Haraka -->
                        <div class="card loan-offer-card" style="border: 3px solid #e74c3c; transition: all 0.3s; animation: cardFloat2 3.5s ease-in-out infinite; background: linear-gradient(135deg, rgba(231, 76, 60, 0.05), rgba(255,255,255,1));">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <img src="pesa-logo.png" alt="Pesa Haraka" style="width: 60px; height: 60px; border-radius: 12px; object-fit: cover; border: 2px solid #e74c3c;" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 60 60%22><rect fill=%22%23e74c3c%22 width=%2260%22 height=%2260%22 rx=%2212%22/><text x=%2230%22 y=%2235%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2210%22 font-family=%22sans-serif%22>PH</text></svg>'">
                                <div>
                                    <h4 style="font-size: 1.1rem; color: var(--primary);">Pesa Haraka</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Instant Cash Loans</p>
                                </div>
                            </div>
                            <div style="text-align: center; background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                                <h3 style="font-size: 2rem; color: var(--success);">KES 7,000</h3>
                                <p style="font-size: 0.9rem; color: var(--gray);">Receive KES 6,770 to your M-Pesa</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 15px;">
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Savings Required</p>
                                    <p style="font-weight: 600; color: var(--warning);">KES 230</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Repayment</p>
                                    <p style="font-weight: 600;">KES 7,147</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Duration</p>
                                    <p style="font-weight: 600;">70 Days</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Interest</p>
                                    <p style="font-weight: 600; color: var(--success);">2.1%</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="selectLoanOffer('pesa', 7000, 230, 6770, 7147, 70, 2.1)">
                                <i class="fas fa-check"></i> Select This Offer
                            </button>
                        </div>

                        <!-- Mkopo Sasa -->
                        <div class="card loan-offer-card" style="border: 3px solid var(--success); background: linear-gradient(135deg, rgba(39, 174, 96, 0.08), rgba(46, 204, 113, 0.03)); transition: all 0.3s; animation: cardFloat3 2.5s ease-in-out infinite; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: linear-gradient(135deg, var(--success), #2ecc71); color: white; padding: 6px 14px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; box-shadow: 0 3px 10px rgba(39,174,96,0.3);">BEST VALUE</div>
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <img src="mkopo-logo.png" alt="Mkopo Sasa" style="width: 60px; height: 60px; border-radius: 12px; object-fit: cover; border: 2px solid var(--success);" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 60 60%22><rect fill=%22%2327ae60%22 width=%2260%22 height=%2260%22 rx=%2212%22/><text x=%2230%22 y=%2235%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2210%22 font-family=%22sans-serif%22>MS</text></svg>'">
                                <div>
                                    <h4 style="font-size: 1.1rem; color: var(--primary);">Mkopo Sasa</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray);">Premium Loans</p>
                                </div>
                            </div>
                            <div style="text-align: center; background: linear-gradient(135deg, var(--success), #2ecc71); color: white; padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                                <h3 style="font-size: 2rem;">KES 15,000</h3>
                                <p style="font-size: 0.9rem; opacity: 0.9;">Receive KES 14,570 to your M-Pesa</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 15px;">
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Savings Required</p>
                                    <p style="font-weight: 600; color: var(--warning);">KES 430</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Repayment</p>
                                    <p style="font-weight: 600;">KES 15,225</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Duration</p>
                                    <p style="font-weight: 600;">100 Days</p>
                                </div>
                                <div style="text-align: center; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <p style="font-size: 0.75rem; color: var(--gray);">Interest</p>
                                    <p style="font-weight: 600; color: var(--success);">1.5%</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="background: linear-gradient(135deg, var(--success), #27ae60);" onclick="selectLoanOffer('mkopo', 15000, 430, 14570, 15225, 100, 1.5)">
                                <i class="fas fa-star"></i> Select This Offer
                            </button>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: var(--light); border-radius: 12px;">
                        <p style="font-size: 0.85rem; color: var(--gray); text-align: center;"><i class="fas fa-info-circle"></i> All loans are subject to approval. Savings deposits are refundable upon successful loan repayment.After payment the loan is imediately disbursed to your M-pesa account number provided ,delay may take 5-6 minutes depending on the lender chosen</p>
                    </div>
                </div>
            </div>

            <!-- Loan Review Page -->
            <div id="page-loan-review" class="page">
                <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 20px; text-align: center;">
                    <i class="fas fa-clipboard-check" style="font-size: 2.5rem; margin-bottom: 10px;"></i>
                    <h2 style="font-size: 1.5rem; margin-bottom: 5px;">Review Your Application</h2>
                    <p style="opacity: 0.9; font-size: 0.9rem;">Please verify all information before proceeding</p>
                </div>
                <div class="page-content" style="padding-top: 20px;">
                    <div class="card" style="margin-bottom: 15px;">
                        <h3 class="card-title"><i class="fas fa-user"></i> Personal Information</h3>
                        <div id="reviewPersonalInfo" style="display: grid; gap: 10px;"></div>
                        <button class="btn btn-outline" style="margin-top: 15px;" onclick="editLoanSection('personal')"><i class="fas fa-edit"></i> Edit</button>
                    </div>

                    <div class="card" style="margin-bottom: 15px;">
                        <h3 class="card-title"><i class="fas fa-users"></i> Emergency Contacts</h3>
                        <div id="reviewEmergencyContacts" style="display: grid; gap: 10px;"></div>
                        <button class="btn btn-outline" style="margin-top: 15px;" onclick="editLoanSection('emergency')"><i class="fas fa-edit"></i> Edit</button>
                    </div>

                    <div class="card" style="margin-bottom: 15px;">
                        <h3 class="card-title"><i class="fas fa-briefcase"></i> Employment Information</h3>
                        <div id="reviewEmploymentInfo" style="display: grid; gap: 10px;"></div>
                        <button class="btn btn-outline" style="margin-top: 15px;" onclick="editLoanSection('employment')"><i class="fas fa-edit"></i> Edit</button>
                    </div>

                    <div class="card" style="margin-bottom: 15px;">
                        <h3 class="card-title"><i class="fas fa-hand-holding-usd"></i> Selected Loan Offer</h3>
                        <div id="reviewLoanOffer" style="display: grid; gap: 10px;"></div>
                        <button class="btn btn-outline" style="margin-top: 15px;" onclick="showPage('loan-offers')"><i class="fas fa-exchange-alt"></i> Change Offer</button>
                    </div>

                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-mobile-alt"></i> Receiving Phone Number(SAFARICOM ONLY)</h3>
                        <div class="form-group" style="margin-bottom: 0;">
                            <div class="phone-wrapper">
                                <span class="phone-prefix">+254</span>
                                <input type="tel" class="form-input" id="reviewReceivingPhone" maxlength="9" oninput="validateReviewPhone(this)">
                            </div>
                            <p class="loan-error" id="reviewPhoneError" style="display: none; color: var(--danger); font-size: 0.8rem; margin-top: 5px;">Enter a valid Safaricom number (07 or 01)</p>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" id="submitLoanReviewBtn" onclick="submitLoanReview()">
                            <i class="fas fa-check-double"></i> Submit & Get Loan
                        </button>
                        <button class="btn btn-outline" onclick="showPage('loan-offers')">
                            <i class="fas fa-arrow-left"></i> Back to Offers
                        </button>
                    </div>
                </div>
            </div>

            <!-- Loan Approval Processing Page -->
            <div id="page-loan-approval-processing" class="page">
                <div style="min-height: calc(100vh - 70px); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; text-align: center; background: linear-gradient(180deg, var(--light) 0%, #e8f5e9 100%);">
                    <!-- Animated Processing Icon -->
                    <div style="position: relative; width: 120px; height: 120px; margin-bottom: 30px;">
                        <div style="width: 120px; height: 120px; border: 5px solid rgba(39, 174, 96, 0.2); border-top-color: var(--success); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                            <i class="fas fa-file-signature" style="font-size: 2.5rem; color: var(--success); animation: pulse 1.5s ease-in-out infinite;"></i>
                        </div>
                    </div>
                    
                    <h2 style="font-size: 1.6rem; color: var(--primary); margin-bottom: 10px; font-weight: 700;">Approving Your Loan</h2>
                    <p style="color: var(--gray); margin-bottom: 15px; font-size: 1rem;">Finalizing with lender...</p>
                    <p style="color: var(--danger); font-size: 0.9rem; margin-bottom: 25px;"><i class="fas fa-exclamation-triangle" style="margin-right: 5px;"></i> Please do not close this page</p>
                    
                    <!-- System Status Card -->
                    <div style="width: 100%; max-width: 400px; background: var(--white); border-radius: 16px; padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                            <span class="live-indicator" style="background: var(--success);"></span>
                            <span style="font-size: 0.85rem; color: var(--success); font-weight: 600;">APPROVAL IN PROGRESS</span>
                        </div>
                        <div id="loanApprovalSteps">
                            <div class="approval-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; background: rgba(39, 174, 96, 0.1); border-radius: 10px;">
                                <i class="fas fa-check-circle" style="color: var(--success); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem; font-weight: 500;">Application received</span>
                            </div>
                            <div class="approval-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; background: rgba(26, 95, 42, 0.1); border-radius: 10px;">
                                <i class="fas fa-spinner fa-spin" style="color: var(--primary); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem; font-weight: 500;">Final verification in progress...</span>
                            </div>
                            <div class="approval-step" style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding: 10px; border-radius: 10px; opacity: 0.5;">
                                <i class="fas fa-circle" style="color: var(--gray); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem;">Confirming with lender...</span>
                            </div>
                            <div class="approval-step" style="display: flex; align-items: center; gap: 12px; padding: 10px; border-radius: 10px; opacity: 0.5;">
                                <i class="fas fa-circle" style="color: var(--gray); font-size: 1.3rem;"></i>
                                <span style="font-size: 0.95rem;">Preparing disbursement...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Timer Badge -->
                    <div style="background: linear-gradient(135deg, var(--success), #2ecc71); color: white; padding: 18px 40px; border-radius: 50px; font-size: 1.3rem; font-weight: 700; box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);">
                        <i class="fas fa-hourglass-half" style="margin-right: 10px; animation: pulse 1s ease-in-out infinite;"></i>
                        <span id="loanApprovalTimer">30</span> seconds
                    </div>
                    
                    <div style="margin-top: 25px; padding: 15px 20px; background: rgba(39, 174, 96, 0.1); border-radius: 12px;">
                        <p style="font-size: 0.9rem; color: var(--primary);"><i class="fas fa-shield-alt" style="margin-right: 8px;"></i> Secure connection to lender network</p>
                    </div>
                </div>
            </div>

            <!-- Loan Approved Page -->
            <div id="page-loan-approved" class="page">
                <div style="background: linear-gradient(135deg, var(--success), #27ae60); color: white; padding: 40px 20px; text-align: center; position: relative; overflow: hidden;">
                    <img src="approved.png" alt="" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.15;" onerror="this.style.display='none'">
                    <div style="position: relative; z-index: 1;">
                        <div style="width: 100px; height: 100px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52" style="width: 60px; height: 60px;">
                                <circle cx="26" cy="26" r="25" fill="none" stroke="#27ae60" stroke-width="2"/>
                                <path fill="none" stroke="#27ae60" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M14.1 27.2l7.1 7.2 16.7-16.8" style="animation: checkmark 0.8s ease-in-out forwards;"/>
                                <style>
                                    @keyframes checkmark { 0% { stroke-dasharray: 0 100; } 100% { stroke-dasharray: 100 100; } }
                                </style>
                            </svg>
                        </div>
                        <h2 style="font-size: 1.8rem; margin-bottom: 10px; font-weight: 700;">Your Loan is Approved!</h2>
                        <p style="opacity: 0.95; font-size: 1.2rem;">KES <span id="approvedLoanAmount">-</span> approved successfully Awaiting disbursement</p>
                    </div>
                </div>

                <div class="page-content" style="padding-top: 20px;">
                    <div class="card" style="margin-bottom: 20px; background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(243, 156, 18, 0.05)); border: 2px solid var(--warning);">
                        <h3 class="card-title" style="color: var(--warning);"><i class="fas fa-exclamation-triangle"></i> Important: Complete Your Savings Deposit</h3>
                        <p style="font-size: 0.9rem; color: var(--dark); line-height: 1.6; margin-bottom: 15px;">
                            To receive your loan, you need to deposit your savings amount first. This is a <strong>refundable deposit</strong> that serves as collateral and will be returned after successful loan repayment.
                        </p>
                        <p style="font-size: 0.85rem; color: var(--gray);">
                            <i class="fas fa-info-circle"></i> Your loan will be disbursed immediately after your savings deposit is confirmed by the lender.
                        </p>
                    </div>

                    <div class="card" style="margin-bottom: 20px;">
                        <h3 class="card-title"><i class="fas fa-file-invoice-dollar"></i> Loan Details</h3>
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--light); border-radius: 8px;">
                                <span style="color: var(--gray);">Savings Amount (Fee)</span>
                                <span style="font-weight: 700; color: var(--warning);" id="approvedSavingsAmount">KES -</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--light); border-radius: 8px;">
                                <span style="color: var(--gray);">Loan Released</span>
                                <span style="font-weight: 600;" id="approvedReleaseNote">deposited to your mpesa provided number Immediately after savings deposit</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--light); border-radius: 8px;">
                                <span style="color: var(--gray);">Phone Number</span>
                                <span style="font-weight: 600;" id="approvedPhoneNumber">-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--light); border-radius: 8px;">
                                <span style="color: var(--gray);">Email</span>
                                <span style="font-weight: 600;" id="approvedEmailHidden">@.com</span>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-primary" id="savingsDepositBtn" onclick="initiateSavingsDeposit()" style="font-size: 1.1rem; padding: 18px; background: linear-gradient(135deg, #f39c12, #e67e22); border: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" style="width: 24px; height: 24px; margin-right: 10px; vertical-align: middle;">
                            <path d="M19.5 5.5c-.83 0-1.5.67-1.5 1.5v.17c-2.09-.59-3.73-2.19-4.5-4.17h-3c-.77 1.98-2.41 3.58-4.5 4.17V7c0-.83-.67-1.5-1.5-1.5S3 6.17 3 7v5c0 4.08 2.55 7.58 6.15 9h5.7C18.45 19.58 21 16.08 21 12V7c0-.83-.67-1.5-1.5-1.5zM12 18c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
                            <circle cx="12" cy="13" r="2.5"/>
                        </svg>
                        Save KES <span id="savingsBtnAmount">-</span> to Get Loan Now
                    </button>

                    <div id="savingsDepositStatus" style="display: none; margin-top: 20px; text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span class="live-indicator"></span>
                            <span id="savingsStatusText">Initiating savings deposit...</span>
                        </div>
                    </div>

                    <button class="btn btn-outline" style="margin-top: 15px;" onclick="showPage('loan-offers'); populateLoanOfferDetails();">
                        <i class="fas fa-exchange-alt"></i> Change Loan Offer
                    </button>

                    <div style="margin-top: 20px; padding: 15px; background: var(--light); border-radius: 12px; text-align: center;">
                        <p style="font-size: 0.85rem; color: var(--gray);"><i class="fas fa-shield-alt"></i> Your savings deposit is secure and will be added to your permanent balance.</p>
                    </div>
                </div>
            </div>
        </main>

        <div class="notification-panel" id="notificationPanel">
            <div class="notification-header">
                <h4><i class="fas fa-bell"></i> Notifications</h4>
                <button onclick="toggleNotifications()" style="background: none; border: none; cursor: pointer;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notification-list" id="notificationList">
                <div class="empty-state" style="padding: 30px;">
                    <i class="fas fa-bell-slash"></i>
                    <p>No notifications yet</p>
                </div>
            </div>
        </div>

        <div class="modal" id="insufficientModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i> Insufficient Balance</h3>
                    <button class="modal-close" onclick="closeModal('insufficientModal')">&times;</button>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 15px;">You need <strong>KES <span id="insufficientShortfall">0</span></strong> more to complete this purchase.</p>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-phone"></i> Phone Number</label>
                        <div class="phone-wrapper">
                            <span class="phone-prefix">+254</span>
                            <input type="tel" class="form-input" id="modalDepositPhone" maxlength="9">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-money-bill"></i> Amount to Deposit</label>
                        <input type="number" class="form-input" id="modalDepositAmount" min="10">
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="depositFromModal()">
                            <i class="fas fa-mobile-alt"></i> Deposit via M-Pesa STK
                        </button>
                        <button class="btn btn-link" onclick="depositFromModalLink()">
                            <i class="fas fa-link"></i> Deposit with Payment Link
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="authModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-lock"></i> Login Required</h3>
                    <button class="modal-close" onclick="closeModal('authModal')">&times;</button>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 20px;">Please login / create an account or use the USE WITHOUT ACCOUNT button below to buy airtime directly no account needed.</p>
                    <div class="btn-group">
                        <a href="login.html" class="btn btn-primary"><i class="fas fa-sign-in-alt"></i> Login</a>
                        <a href="login.html" class="btn btn-outline"><i class="fas fa-user-plus"></i> Sign Up</a>
                    </div>
                    <div class="divider-text"><span>OR</span></div>
                    <button class="btn btn-secondary" onclick="closeModal('authModal'); scrollToDirectBuy();" style="margin-top: 10px;">
                        <i class="fas fa-bolt"></i> Use Without Account  to buy airtime directly
                    </button>
                </div>
            </div>
        </div>
        </div>

        <div class="modal" id="directBuyReceiptModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-receipt"></i> Transaction Receipt</h3>
                    <button class="modal-close" onclick="closeModal('directBuyReceiptModal')">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="receiptContent" style="text-align: center;">
                        <div id="receiptIcon" style="font-size: 4rem; margin-bottom: 20px;"></div>
                        <h4 id="receiptStatus" style="font-size: 1.3rem; margin-bottom: 15px;"></h4>
                        <div style="background: var(--light); border-radius: 12px; padding: 20px; margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: var(--gray);">Phone:</span>
                                <span id="receiptPhone" style="font-weight: 600;"></span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: var(--gray);">Amount:</span>
                                <span id="receiptAmount" style="font-weight: 600;"></span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: var(--gray);">Network:</span>
                                <span id="receiptNetwork" style="font-weight: 600;"></span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: var(--gray);">Transaction ID:</span>
                                <span id="receiptTxId" style="font-weight: 600; font-size: 0.85rem;"></span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--gray);">Date:</span>
                                <span id="receiptDate" style="font-weight: 600;"></span>
                            </div>
                        </div>
                        <p id="receiptMessage" style="color: var(--gray); font-size: 0.9rem;"></p>
                    </div>
                    <button class="btn btn-primary" onclick="closeModal('directBuyReceiptModal')" style="margin-top: 15px;">
                        <i class="fas fa-check"></i> Done
                    </button>
                </div>
            </div>
        </div>

        <!-- Loan Terms Modal -->
        <div class="modal" id="loanTermsModal">
            <div class="modal-content" style="max-height: 90vh; display: flex; flex-direction: column;">
                <div class="modal-header">
                    <h3><i class="fas fa-file-contract" style="color: var(--primary);"></i> Loan Terms & Conditions</h3>
                    <button class="modal-close" onclick="closeModal('loanTermsModal')">&times;</button>
                </div>
                <div class="modal-body" style="flex: 1; overflow: hidden; display: flex; flex-direction: column;">
                    <div id="loanTermsContent" style="flex: 1; overflow-y: auto; padding: 15px; background: var(--light); border-radius: 12px; max-height: 400px;" onscroll="checkTermsScroll()">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Loan Service Agreement</h4>
                        
                        <p style="margin-bottom: 15px; line-height: 1.7;">By applying for a loan through Pesahub Kenya, you agree to the following terms and conditions:</p>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">1. Eligibility Requirements</h5>
                        <ul style="margin-left: 20px; color: var(--gray); line-height: 1.8;">
                            <li>You must be at least 18 years of age</li>
                            <li>You must be a Kenyan citizen with a valid National ID</li>
                            <li>You must have an active M-Pesa registered phone number</li>
                            <li>You must have a source of regular income</li>
                        </ul>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">2. Loan Terms</h5>
                        <ul style="margin-left: 20px; color: var(--gray); line-height: 1.8;">
                            <li>Loan amounts range from KES 4,000 to KES 15,000 for first-time borrowers</li>
                            <li>Interest rates range from 1.5% to 2.1% depending on the lender</li>
                            <li>Loan repayment periods range from 60 to 100 days</li>
                            <li>Late payment penalties may apply</li>
                        </ul>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">3. Savings Deposit (Security Fee)</h5>
                        <ul style="margin-left: 20px; color: var(--gray); line-height: 1.8;">
                            <li>A refundable savings deposit is required before loan disbursement</li>
                            <li>This deposit serves as collateral and is held in your permanent savings balance</li>
                            <li>The savings deposit will be returned upon successful loan repayment</li>
                            <li>Savings deposits cannot be used for airtime purchases</li>
                        </ul>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">4. Loan Disbursement</h5>
                        <ul style="margin-left: 20px; color: var(--gray); line-height: 1.8;">
                            <li>Loans are disbursed directly to your M-Pesa account</li>
                            <li>Disbursement occurs within minutes after savings deposit confirmation</li>
                            <li>A processing fee may be deducted from the loan amount</li>
                        </ul>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">5. Data Privacy & Consent</h5>
                        <ul style="margin-left: 20px; color: var(--gray); line-height: 1.8;">
                            <li>You consent to the collection and processing of your personal data</li>
                            <li>Your information may be shared with partner lending institutions</li>
                            <li>We may contact you and your emergency contacts regarding loan matters</li>
                            <li>Your data is protected according to Kenyan data protection laws</li>
                        </ul>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">6. Default & Collections</h5>
                        <ul style="margin-left: 20px; color: var(--gray); line-height: 1.8;">
                            <li>Failure to repay may result in negative credit reporting</li>
                            <li>Collection activities may be initiated for overdue payments</li>
                            <li>Your savings deposit may be forfeited in case of default</li>
                        </ul>
                        
                        <h5 style="margin: 20px 0 10px; color: var(--dark);">7. Agreement</h5>
                        <p style="color: var(--gray); line-height: 1.8; margin-bottom: 20px;">
                            By proceeding with the loan application, you acknowledge that you have read, understood, and agree to be bound by these terms and conditions. You confirm that all information provided is accurate and complete.
                        </p>
                        
                        <div style="text-align: center; padding: 20px; background: var(--success); color: white; border-radius: 12px;">
                            <i class="fas fa-check-circle" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p style="font-weight: 600;">End of Terms & Conditions</p>
                            <p style="font-size: 0.85rem; opacity: 0.9;">Scroll down to enable the Accept button</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <button class="btn btn-primary" id="acceptTermsBtn" onclick="acceptLoanTerms()" disabled style="opacity: 0.5;">
                            <i class="fas fa-check"></i> I Accept the Terms & Conditions
                        </button>
                        <button class="btn btn-outline" onclick="closeModal('loanTermsModal')" style="margin-top: 10px;">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loan Offer Selection Popup -->
        <div class="modal" id="loanOfferPopup">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-check-circle" style="color: var(--success);"></i> Confirm Selection</h3>
                    <button class="modal-close" onclick="closeModal('loanOfferPopup')">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <img src="company-logo.png" id="popupLenderLogo" alt="Lender" style="width: 80px; height: 80px; border-radius: 16px; object-fit: cover; margin: 0 auto 15px; border: 3px solid var(--success); display: block;" onerror="this.outerHTML='<div style=\\'width: 80px; height: 80px; background: linear-gradient(135deg, var(--success), #2ecc71); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;\\'><i class=\\'fas fa-hand-holding-usd\\' style=\\'font-size: 2rem; color: white;\\'></i></div>'">
                        <h4 style="color: var(--primary); margin-bottom: 5px; font-size: 1.2rem;" id="popupLenderName">-</h4>
                        <p style="color: var(--gray);">Loan Offer</p>
                    </div>
                    
                    <div style="background: var(--light); border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: var(--gray);">Loan Amount</span>
                            <span style="font-weight: 700; color: var(--success);" id="popupLoanAmount">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: var(--gray);">Savings Required</span>
                            <span style="font-weight: 600; color: var(--warning);" id="popupSavings">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: var(--gray);">You Receive</span>
                            <span style="font-weight: 600;" id="popupReceive">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: var(--gray);">Repayment</span>
                            <span style="font-weight: 600;" id="popupRepayment">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--gray);">Duration</span>
                            <span style="font-weight: 600;" id="popupDuration">-</span>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="confirmLoanSelection()">
                            <i class="fas fa-arrow-right"></i> Proceed to Review
                        </button>
                        <button class="btn btn-outline" onclick="closeModal('loanOfferPopup')">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="toast" id="toast">
            <i class="fas fa-info-circle"></i>
            <span id="toastMessage">Message</span>
        </div>

        <div class="modal" id="loanResumeModal">
            <div class="modal-content" style="max-width: 400px;">
                <div class="modal-header" style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; border-radius: 12px 12px 0 0; padding: 20px;">
                    <h3 style="display: flex; align-items: center; gap: 10px;"><i class="fas fa-info-circle"></i> Loan Application Notice</h3>
                    <button class="modal-close" onclick="closeModal('loanResumeModal')" style="color: white;">&times;</button>
                </div>
                <div class="modal-body" style="padding: 25px;">
                    <p style="margin-bottom: 15px; color: var(--dark); font-size: 0.95rem;">You have an existing loan application in progress.</p>
                    
                    <div style="background: var(--light); border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: var(--gray);">Status</span>
                            <span style="font-weight: 600; color: var(--success);" id="resumeStatus">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: var(--gray);">Name</span>
                            <span style="font-weight: 600;" id="resumeName">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;" id="resumeOfferRow" style="display: none;">
                            <span style="color: var(--gray);">Selected Offer</span>
                            <span style="font-weight: 600; color: var(--primary);" id="resumeOffer">-</span>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="resumeLoanApplication()" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                            <i class="fas fa-arrow-right"></i> Continue Application
                        </button>
                        <button class="btn btn-outline" onclick="startNewLoanApplication()" style="color: var(--danger); border-color: var(--danger);">
                            <i class="fas fa-redo"></i> Start New Application
                        </button>
                        <button class="btn btn-outline" onclick="closeModal('loanResumeModal')">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/@id/__x00__/client/index.html?html-proxy&index=2.js"></script>
<script src="https://replit-cdn.com/replit-pill/replit-pill.global.js" data-repl-id="ca252ae0-fa61-4b7f-af83-a3badac5c805"></script></body>
